(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";let a=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>a],3116)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},69638,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],69638)},28518,e=>{"use strict";var a=e.i(43476),t=e.i(18566),s=e.i(54338),i=e.i(71645),r=e.i(63816),l=e.i(46696),n=e.i(71689),c=e.i(69638),o=e.i(27612),d=e.i(19455);function m({onBack:e,onMarkAllRead:t,onDeleteAll:s,hasNotifications:i}){return(0,a.jsx)("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-10 px-4 py-4 shadow-sm",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-600 hover:bg-gray-100 rounded-full",children:(0,a.jsx)(n.ArrowLeft,{className:"w-6 h-6"})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Notifikasi"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 self-end md:self-auto",children:[(0,a.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:t,disabled:!i,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 text-xs md:text-sm",children:[(0,a.jsx)(c.CheckCircle,{className:"w-4 h-4 mr-2"}),"Tandai Baca"]}),(0,a.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:s,disabled:!i,className:"text-red-500 hover:text-red-700 hover:bg-red-50 text-xs md:text-sm",children:[(0,a.jsx)(o.Trash2,{className:"w-4 h-4 mr-2"}),"Hapus Semua"]})]})]})})}var u=e.i(45423),h=e.i(3116);function x({notification:e,onRead:t,onDelete:s}){return(0,a.jsx)("div",{onClick:()=>t(e.id,e.is_read),className:`
                group relative p-4 rounded-xl border transition-all cursor-pointer hover:shadow-md
                ${e.is_read?"bg-white border-gray-200":"bg-orange-50 border-orange-100 shadow-sm"}
            `,children:(0,a.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,a.jsx)("div",{className:`
                    mt-1 min-w-[40px] h-10 rounded-full flex items-center justify-center
                    ${e.is_read?"bg-gray-100 text-gray-500":"bg-[#D93F21]/10 text-[#D93F21]"}
                `,children:(0,a.jsx)(u.Bell,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 pr-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("h4",{className:`text-base ${e.is_read?"font-semibold text-gray-700":"font-bold text-gray-900"}`,children:e.title}),!e.is_read&&(0,a.jsx)("span",{className:"w-2.5 h-2.5 bg-[#D93F21] rounded-full mt-1.5 animate-pulse"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed mb-2",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,a.jsx)(h.Clock,{className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{children:e.created_at})]})]}),(0,a.jsx)("button",{onClick:a=>{a.stopPropagation(),s(e.id)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Hapus notifikasi ini",children:(0,a.jsx)(o.Trash2,{className:"w-4 h-4"})})]})})}function f(){return(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"h-24 bg-gray-200 rounded-xl animate-pulse"},e))})}function p(){return(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("div",{className:"bg-gray-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Bell,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Belum ada notifikasi"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Semua aktivitas pesanan Anda akan muncul di sini."})]})}function g(){let{user:e}=(0,s.useAuth)(),n=(0,t.useRouter)(),{notifications:c,loading:o,markAsRead:d,markAllRead:u,deleteOne:h,deleteAll:g}=(e=>{let[a,t]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),c=(0,i.useCallback)(async()=>{if(!e){t([]),n(!1);return}try{n(!0);let a=await r.default.get("/notifications",{params:{user_id:e}}),s=a.data?.data||a.data;Array.isArray(s)?t(s):s?.notifications&&Array.isArray(s.notifications)?t(s.notifications):(console.warn("Format notifikasi tidak valid:",s),t([]))}catch(e){console.error("Gagal ambil notif",e),t([])}finally{n(!1)}},[e]);(0,i.useEffect)(()=>{c()},[c]);let o=async()=>{if(!confirm("Apakah Anda yakin ingin menghapus SEMUA notifikasi?"))return;let s=[...a];t([]);try{await r.default.delete("/notifications",{params:{user_id:e}}),l.toast.success("Semua notifikasi dihapus")}catch(e){console.error("Gagal hapus semua",e),l.toast.error("Gagal menghapus notifikasi"),t(s)}};return{notifications:a,loading:s,markAsRead:async(a,s)=>{if(!s){t(e=>(e||[]).map(e=>e.id===a?{...e,is_read:!0}:e));try{await r.default.post(`/notifications/${a}/read`,{},{params:{user_id:e}})}catch(e){console.error("Gagal update status read",e),c()}}},markAllRead:async()=>{t(e=>(e||[]).map(e=>({...e,is_read:!0})));try{await r.default.post("/notifications/read-all",{},{params:{user_id:e}}),l.toast.success("Semua notifikasi ditandai sudah dibaca")}catch(e){console.error("Gagal mark all",e),c()}},deleteOne:async a=>{t(e=>(e||[]).filter(e=>e.id!==a));try{await r.default.delete(`/notifications/${a}`,{params:{user_id:e}})}catch(e){console.error("Gagal hapus notifikasi",e),l.toast.error("Gagal menghapus notifikasi"),c()}},deleteAll:o,refetch:c}})(e?.id);return e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-10",children:[(0,a.jsx)(m,{onBack:()=>n.back(),onMarkAllRead:u,onDeleteAll:g,hasNotifications:c.length>0}),(0,a.jsx)("div",{className:"max-w-2xl mx-auto px-4 mt-6",children:o?(0,a.jsx)(f,{}):0===c.length?(0,a.jsx)(p,{}):(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,a.jsx)(x,{notification:e,onRead:d,onDelete:h},e.id))})})]}):null}e.s(["default",()=>g],28518)}]);