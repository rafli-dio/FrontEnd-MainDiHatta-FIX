(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},3408,e=>{"use strict";let a=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",()=>a])},73708,e=>{"use strict";var a=e.i(3408);e.s(["Image",()=>a.default])},37822,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(81140),s=e.i(20783),n=e.i(30030),i=e.i(26330),l=e.i(3536),o=e.i(65491),d=e.i(10772),u=e.i(53660),c=e.i(74606),p=e.i(96626);function m(e){var r;let n,i=(r=e,(n=t.forwardRef((e,a)=>{let{children:r,...n}=e;if(t.isValidElement(r)){var i;let e,l,o=(i=r,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),d=function(e,a){let t={...a};for(let r in a){let s=e[r],n=a[r];/^on[A-Z]/.test(r)?s&&n?t[r]=(...e)=>{let a=n(...e);return s(...e),a}:s&&(t[r]=s):"style"===r?t[r]={...s,...n}:"className"===r&&(t[r]=[s,n].filter(Boolean).join(" "))}return{...e,...t}}(n,r.props);return r.type!==t.Fragment&&(d.ref=a?(0,s.composeRefs)(a,o):o),t.cloneElement(r,d)}return t.Children.count(r)>1?t.Children.only(null):null})).displayName=`${r}.SlotClone`,n),l=t.forwardRef((e,r)=>{let{children:s,...n}=e,l=t.Children.toArray(s),o=l.find(h);if(o){let e=o.props.children,s=l.map(a=>a!==o?a:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,a.jsx)(i,{...n,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,a.jsx)(i,{...n,ref:r,children:s})});return l.displayName=`${e}.Slot`,l}e.i(74080);var g=Symbol("radix.slottable");function h(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===g}var x=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let s=m(`Primitive.${r}`),n=t.forwardRef((e,t)=>{let{asChild:n,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(n?s:r,{...i,ref:t})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{}),f=e.i(69340),j=e.i(86312),b=e.i(85369),_="Popover",[y,v]=(0,n.createContextScope)(_,[u.createPopperScope]),k=(0,u.createPopperScope)(),[N,S]=y(_),C=e=>{let{__scopePopover:r,children:s,open:n,defaultOpen:i,onOpenChange:l,modal:o=!1}=e,c=k(r),p=t.useRef(null),[m,g]=t.useState(!1),[h,x]=(0,f.useControllableState)({prop:n,defaultProp:i??!1,onChange:l,caller:_});return(0,a.jsx)(u.Root,{...c,children:(0,a.jsx)(N,{scope:r,contentId:(0,d.useId)(),triggerRef:p,open:h,onOpenChange:x,onOpenToggle:t.useCallback(()=>x(e=>!e),[x]),hasCustomAnchor:m,onCustomAnchorAdd:t.useCallback(()=>g(!0),[]),onCustomAnchorRemove:t.useCallback(()=>g(!1),[]),modal:o,children:s})})};C.displayName=_;var w="PopoverAnchor";t.forwardRef((e,r)=>{let{__scopePopover:s,...n}=e,i=S(w,s),l=k(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:d}=i;return t.useEffect(()=>(o(),()=>d()),[o,d]),(0,a.jsx)(u.Anchor,{...l,...n,ref:r})}).displayName=w;var P="PopoverTrigger",I=t.forwardRef((e,t)=>{let{__scopePopover:n,...i}=e,l=S(P,n),o=k(n),d=(0,s.useComposedRefs)(t,l.triggerRef),c=(0,a.jsx)(x.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":H(l.open),...i,ref:d,onClick:(0,r.composeEventHandlers)(e.onClick,l.onOpenToggle)});return l.hasCustomAnchor?c:(0,a.jsx)(u.Anchor,{asChild:!0,...o,children:c})});I.displayName=P;var R="PopoverPortal",[A,D]=y(R,{forceMount:void 0}),M=e=>{let{__scopePopover:t,forceMount:r,children:s,container:n}=e,i=S(R,t);return(0,a.jsx)(A,{scope:t,forceMount:r,children:(0,a.jsx)(p.Presence,{present:r||i.open,children:(0,a.jsx)(c.Portal,{asChild:!0,container:n,children:s})})})};M.displayName=R;var T="PopoverContent",F=t.forwardRef((e,t)=>{let r=D(T,e.__scopePopover),{forceMount:s=r.forceMount,...n}=e,i=S(T,e.__scopePopover);return(0,a.jsx)(p.Presence,{present:s||i.open,children:i.modal?(0,a.jsx)(E,{...n,ref:t}):(0,a.jsx)(O,{...n,ref:t})})});F.displayName=T;var L=m("PopoverContent.RemoveScroll"),E=t.forwardRef((e,n)=>{let i=S(T,e.__scopePopover),l=t.useRef(null),o=(0,s.useComposedRefs)(n,l),d=t.useRef(!1);return t.useEffect(()=>{let e=l.current;if(e)return(0,j.hideOthers)(e)},[]),(0,a.jsx)(b.RemoveScroll,{as:L,allowPinchZoom:!0,children:(0,a.jsx)(B,{...e,ref:o,trapFocus:i.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),d.current||i.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let a=e.detail.originalEvent,t=0===a.button&&!0===a.ctrlKey;d.current=2===a.button||t},{checkForDefaultPrevented:!1}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),O=t.forwardRef((e,r)=>{let s=S(T,e.__scopePopover),n=t.useRef(!1),i=t.useRef(!1);return(0,a.jsx)(B,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||s.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,"pointerdown"===a.detail.originalEvent.type&&(i.current=!0));let t=a.target;s.triggerRef.current?.contains(t)&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&i.current&&a.preventDefault()}})}),B=t.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:d,disableOutsidePointerEvents:c,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:g,onInteractOutside:h,...x}=e,f=S(T,r),j=k(r);return(0,l.useFocusGuards)(),(0,a.jsx)(o.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:d,children:(0,a.jsx)(i.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:h,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:g,onDismiss:()=>f.onOpenChange(!1),children:(0,a.jsx)(u.Content,{"data-state":H(f.open),role:"dialog",id:f.contentId,...j,...x,ref:t,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),V="PopoverClose";function H(e){return e?"open":"closed"}t.forwardRef((e,t)=>{let{__scopePopover:s,...n}=e,i=S(V,s);return(0,a.jsx)(x.button,{type:"button",...n,ref:t,onClick:(0,r.composeEventHandlers)(e.onClick,()=>i.onOpenChange(!1))})}).displayName=V,t.forwardRef((e,t)=>{let{__scopePopover:r,...s}=e,n=k(r);return(0,a.jsx)(u.Arrow,{...n,...s,ref:t})}).displayName="PopoverArrow";var J=e.i(75157);let $=t.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},n)=>(0,a.jsx)(M,{children:(0,a.jsx)(F,{ref:n,align:t,sideOffset:r,className:(0,J.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...s})}));$.displayName=F.displayName,e.s(["Popover",()=>C,"PopoverContent",()=>$,"PopoverTrigger",()=>I],37822)},56909,e=>{"use strict";let a=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},99685,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(18566),s=e.i(22016),n=e.i(56909),i=e.i(31278),l=e.i(87316),o=e.i(61659),d=e.i(84614),u=e.i(52571),c=e.i(73708),p=e.i(1851),m=e.i(42956),g=e.i(19455),h=e.i(55764),x=e.i(10204),f=e.i(99375),j=e.i(15288),b=e.i(67489),_=e.i(37822),y=e.i(27766),v=e.i(75157),k=e.i(63816),N=e.i(46696);function S(){let e,S=(0,r.useSearchParams)().get("date"),{isSaving:C,lapangans:w,users:P,paymentMethods:I,statuses:R,isManualBooking:A,setIsManualBooking:D,formData:M,setFormData:T,getJamSelesai:F,getEstimasiHarga:L,handleSubmit:E,getBookedDates:O,isTimeSlotBooked:B,maxDuration:V,isTimePassed:H}=function(){let e=(0,r.useRouter)(),[a,s]=(0,t.useState)(!1),[n,i]=(0,t.useState)([]),[l,o]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[c,m]=(0,t.useState)([]),[g,h]=(0,t.useState)([]),[x,f]=(0,t.useState)(!1),[j,b]=(0,t.useState)(12),[_,y]=(0,t.useState)({buka:6,tutup:23}),[v,S]=(0,t.useState)({nama_pengirim:"",user_id:"",acara:"",tanggal_booking:void 0,lapangan_id:"",jam_mulai:"",durasi_jam:"1",payment_method_id:"",status_booking_id:"1",jumlah_dp:"",asal_bank:"",bukti_pembayaran:null});(0,t.useEffect)(()=>{(async()=>{try{let[e,a,t,r,s]=await Promise.all([k.default.get("/api/lapangans"),k.default.get("/api/users"),k.default.get("/api/paymentMethods"),k.default.get("/api/statusBookings"),k.default.get("/api/bookings")]),n=e=>{let a=e.data?.data||e.data;return Array.isArray(a)?a:[]},l=n(e);i(l);let d=n(a).filter(e=>{if(!e)return!1;let a=2===e.role_id,t=e.role?.name_role?.toLowerCase()==="pelanggan"||e.role?.name?.toLowerCase()==="pelanggan";return a||t});o(d);let c=n(t);if(u(c.filter(e=>e?.is_aktif)),m(n(r)),h(n(s)),l.length>0){let e=l[0];S(a=>({...a,lapangan_id:String(e.id)})),e.jam_buka&&e.jam_tutup&&y({buka:parseInt(e.jam_buka.split(":")[0]),tutup:parseInt(e.jam_tutup.split(":")[0])})}}catch(e){console.error("init create booking form",e),N.toast.error(e?.response?.data?.message||"Gagal memuat data form booking.")}})()},[]),(0,t.useEffect)(()=>{let e=Array.isArray(n)?n:[];if(v.lapangan_id&&e.length>0){let a=e.find(e=>String(e.id)===String(v.lapangan_id));a&&a.jam_buka&&a.jam_tutup&&y({buka:parseInt(a.jam_buka.split(":")[0]),tutup:parseInt(a.jam_tutup.split(":")[0])})}},[v.lapangan_id,n]),(0,t.useEffect)(()=>{if(!v.jam_mulai||!v.tanggal_booking||!v.lapangan_id)return void b(5);let e=(0,p.format)(v.tanggal_booking,"yyyy-MM-dd"),a=parseInt(v.jam_mulai.split(":")[0]),t=parseInt(String(v.lapangan_id)),r=(Array.isArray(g)?g:[]).filter(r=>r?.tanggal_booking===e&&r?.status_booking_id!==4&&r?.lapangan_id===t&&parseInt(r.jam_mulai.split(":")[0])>a).sort((e,a)=>parseInt(e.jam_mulai)-parseInt(a.jam_mulai)),s=_.tutup,n=0;b(n=Math.max(1,Math.min(n=r.length>0?parseInt(r[0].jam_mulai.split(":")[0])-a:s-a,12))),parseInt(v.durasi_jam)>n&&S(e=>({...e,durasi_jam:String(n)}))},[v.jam_mulai,v.tanggal_booking,v.lapangan_id,g,_]);let C=e=>{if(!v.tanggal_booking||!v.lapangan_id)return!1;let a=(0,p.format)(v.tanggal_booking,"yyyy-MM-dd"),t=parseInt(String(v.lapangan_id)),[r]=e.split(":").map(Number);return(Array.isArray(g)?g:[]).some(e=>{let s;if(!e||!e.tanggal_booking||!e.jam_mulai||e.tanggal_booking!==a||e.lapangan_id!==t||4===e.status_booking_id)return!1;let[n]=e.jam_mulai.split(":").map(Number);return s=e.jam_selesai?parseInt(e.jam_selesai.split(":")[0]):n+(e.durasi_jam?Number(e.durasi_jam):1),r>=n&&r<s})},w=async()=>{if(!v.lapangan_id||!v.tanggal_booking||!v.jam_mulai)return N.toast.error("Isi semua field jadwal (lapangan, tanggal, jam mulai).");if(x){if(!v.nama_pengirim)return N.toast.error("Isi nama pelanggan untuk booking manual.")}else if(!v.user_id)return N.toast.error("Pilih member / user untuk booking.");if(C(v.jam_mulai))return N.toast.error("Jam yang dipilih sudah terisi. Silakan pilih jam lain.");s(!0);try{let a={lapangan_id:parseInt(String(v.lapangan_id)),tanggal_booking:(0,p.format)(v.tanggal_booking,"yyyy-MM-dd"),jam_mulai:v.jam_mulai,durasi_jam:parseInt(String(v.durasi_jam||"1")),payment_method_id:v.payment_method_id?parseInt(String(v.payment_method_id)):void 0,acara:v.acara||void 0,asal_bank:v.asal_bank||void 0,nama_pengirim:v.nama_pengirim||void 0,jumlah_dp:v.jumlah_dp?parseInt(String(v.jumlah_dp)):void 0,status_booking_id:v.status_booking_id?parseInt(String(v.status_booking_id)):1};!x&&v.user_id&&(a.user_id=parseInt(String(v.user_id)));let t=await k.default.post("/api/bookings",a),r=t.data?.data?.id||t.data.id;if(v.bukti_pembayaran){let e=new FormData;e.append("bukti_pembayaran",v.bukti_pembayaran),v.jumlah_dp&&e.append("jumlah_dp",v.jumlah_dp),await k.default.post(`/api/bookings/${r}/payment`,e)}v.status_booking_id&&"1"!==String(v.status_booking_id)&&"2"!==String(v.status_booking_id)&&await k.default.patch(`/api/bookings/${r}/status`,{status_booking_id:parseInt(String(v.status_booking_id))}),N.toast.success("Booking berhasil dibuat."),e.push("/admin/bookings")}catch(t){let e=t.response?.status,a=t.response?.data;if(422===e&&a?.errors){let e=Object.values(a.errors),t=e?.[0]?.[0];N.toast.error(t||a.message||"Validasi gagal.")}else N.toast.error(a?.message||"Gagal menyimpan booking.")}finally{s(!1)}};return{isSaving:a,lapangans:n,users:l,paymentMethods:d,statuses:c,isManualBooking:x,setIsManualBooking:f,formData:v,setFormData:S,getJamSelesai:()=>{if(!v.jam_mulai)return"--:--";let[e,a]=(v.jam_mulai||"").split(":").map(Number),t=e+Number(v.durasi_jam||0);return`${String(t).padStart(2,"0")}:${String(a||0).padStart(2,"0")}`},getEstimasiHarga:()=>{let e=(Array.isArray(n)?n:[]).find(e=>String(e.id)===String(v.lapangan_id));return(e?Number(e.harga_per_jam||0):0)*Number(v.durasi_jam||0)},handleSubmit:w,getBookedDates:()=>(Array.isArray(g)?g:[]).filter(e=>e?.status_booking_id!==4&&e?.tanggal_booking).map(e=>new Date(e.tanggal_booking)),isTimeSlotBooked:C,maxDuration:j,isTimePassed:e=>{if(!v.tanggal_booking)return!1;let a=new Date,t=new Date(v.tanggal_booking);if(a.getDate()===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()){let[t]=e.split(":").map(Number);return t<=a.getHours()}return!1},jamOperasional:_}}(),[J,$]=(0,t.useState)({buka:6,tutup:23});(0,t.useEffect)(()=>{if(S&&!M.tanggal_booking)try{let[e,a,t]=S.split("-").map(Number),r=new Date(e,a-1,t);isNaN(r.getTime())||T(e=>({...e,tanggal_booking:r}))}catch(e){console.error("Failed to parse date from URL:",e)}},[S]),(0,t.useEffect)(()=>{if(M.lapangan_id&&w.length>0){let e=w.find(e=>String(e.id)===M.lapangan_id);e&&e.jam_buka&&e.jam_tutup&&$({buka:parseInt(e.jam_buka.split(":")[0]),tutup:parseInt(e.jam_tutup.split(":")[0])})}},[M.lapangan_id,w]);let U=Array.from({length:J.tutup-J.buka},(e,a)=>{let t=a+J.buka;return`${String(t).padStart(2,"0")}:00`}),K=R.find(e=>"terkonfirmasi"===e.nama_status.toLowerCase()),W=K?String(K.id):"3";return(0,t.useEffect)(()=>{("1"===M.status_booking_id||""===M.status_booking_id)&&T(e=>({...e,status_booking_id:W}))},[W,M.status_booking_id,T]),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),E()},className:"space-y-6",children:[(0,a.jsxs)(j.Card,{children:[(0,a.jsx)(j.CardHeader,{className:"pb-3 border-b mb-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(j.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(d.User,{className:"w-4 h-4"})," Informasi Penyewa"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-50 px-3 py-1.5 rounded-full border",children:[(0,a.jsx)(x.Label,{htmlFor:"mode-manual",className:"text-xs cursor-pointer font-medium text-gray-600",children:A?"Mode Tamu (Walk-in)":"Mode Member"}),(0,a.jsx)(f.Switch,{id:"mode-manual",checked:A,onCheckedChange:D})]})]})}),(0,a.jsxs)(j.CardContent,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:["Nama Pelanggan (Manual) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(h.Input,{placeholder:"Cth: Pak Budi (Umum)",value:M.nama_pengirim,onChange:e=>T({...M,nama_pengirim:e.target.value}),className:"bg-yellow-50 border-yellow-200 focus:border-yellow-400"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"Nama ini akan dicatat sebagai penyewa."})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:["Pilih Member ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)(b.Select,{value:M.user_id?String(M.user_id):void 0,onValueChange:e=>T({...M,user_id:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"Cari nama member..."})}),(0,a.jsx)(b.SelectContent,{children:P.map(e=>(0,a.jsxs)(b.SelectItem,{value:e.id.toString(),children:[e.name," (",e.nomor_telepon||"-",")"]},e.id))})]}),(0,a.jsxs)("p",{className:"text-[10px] text-gray-500",children:[(0,a.jsx)(s.default,{href:"/admin/users",className:"text-blue-600 hover:underline",children:"Tambah User Baru"})," jika belum terdaftar."]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Nama Kegiatan / Club"}),(0,a.jsx)(h.Input,{placeholder:"Cth: Latihan Rutin, Turnamen Kecil",value:M.acara,onChange:e=>T({...M,acara:e.target.value})})]})]})]}),(0,a.jsxs)(j.Card,{children:[(0,a.jsx)(j.CardHeader,{className:"pb-3 border-b mb-4",children:(0,a.jsxs)(j.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(l.Calendar,{className:"w-4 h-4"})," Jadwal Main"]})}),(0,a.jsxs)(j.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:["Pilih Lapangan ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)(b.Select,{value:M.lapangan_id,onValueChange:e=>T({...M,lapangan_id:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"Pilih Lapangan"})}),(0,a.jsx)(b.SelectContent,{children:w.map(e=>(0,a.jsx)(b.SelectItem,{value:e.id.toString(),children:e.nama_lapangan},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:["Tanggal Main ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)(_.Popover,{children:[(0,a.jsx)(_.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(g.Button,{variant:"outline",className:(0,v.cn)("w-full justify-start text-left font-normal",!M.tanggal_booking&&"text-muted-foreground"),children:[(0,a.jsx)(l.Calendar,{className:"mr-2 h-4 w-4"}),M.tanggal_booking?(0,p.format)(M.tanggal_booking,"PPP",{locale:m.id}):(0,a.jsx)("span",{children:"Pilih tanggal"})]})}),(0,a.jsx)(_.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,a.jsx)(y.Calendar,{mode:"single",selected:M.tanggal_booking,onSelect:e=>T({...M,tanggal_booking:e}),initialFocus:!0,disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),modifiers:{booked:O()},modifiersStyles:{booked:{textDecoration:"underline",color:"#D93F21",fontWeight:"bold"}}})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(x.Label,{children:["Jam Mulai ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),M.lapangan_id&&(0,a.jsxs)("span",{className:"text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:["Buka: ",J.buka,":00 - ",J.tutup,":00"]})]}),(0,a.jsxs)(b.Select,{value:M.jam_mulai,onValueChange:e=>T({...M,jam_mulai:e}),disabled:!M.tanggal_booking||!M.lapangan_id,children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"Pilih Jam"})}),(0,a.jsx)(b.SelectContent,{className:"max-h-[200px]",children:U.length>0?U.map(e=>{let t=B(e),r=H(e),s=t||r;return(0,a.jsxs)(b.SelectItem,{value:e,disabled:s,className:s?"text-gray-400 bg-gray-50 cursor-not-allowed opacity-50":"",children:[e,t&&" (Terisi)",r&&!t&&" (Lewat)"]},e)}):(0,a.jsx)("div",{className:"p-2 text-sm text-gray-500 text-center",children:"Pilih lapangan dahulu"})})]}),!M.tanggal_booking&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pilih tanggal & lapangan dulu."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(x.Label,{children:"Durasi (Jam)"}),M.jam_mulai&&(0,a.jsxs)("span",{className:"text-[10px] text-orange-600 font-bold",children:["Max: ",V," Jam"]})]}),(0,a.jsx)(h.Input,{type:"number",min:"1",max:V,value:M.durasi_jam,onChange:e=>{let a=parseInt(e.target.value);isNaN(a)&&(a=1),a>V&&(a=V),a<1&&(a=1),T({...M,durasi_jam:String(a)})},disabled:!M.jam_mulai}),parseInt(M.durasi_jam)===V&&M.jam_mulai&&(0,a.jsx)("p",{className:"text-[10px]  italic text-red-500",children:"* Mentok karena ada booking lain atau jam tutup."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Jam Selesai (Est)"}),(0,a.jsx)(h.Input,{value:F(),disabled:!0,className:"bg-gray-100"})]})]})]})]}),(0,a.jsxs)(j.Card,{className:"border-l-4 border-l-[#D93F21]",children:[(0,a.jsx)(j.CardHeader,{className:"pb-3 border-b mb-4",children:(0,a.jsxs)(j.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,a.jsx)(o.CreditCard,{className:"w-4 h-4"})," Pembayaran & Status"]})}),(0,a.jsxs)(j.CardContent,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Total Harga Sewa"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-[#D93F21]",children:(e=L(),new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:["Metode Pembayaran ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)(b.Select,{value:M.payment_method_id?String(M.payment_method_id):void 0,onValueChange:e=>T({...M,payment_method_id:e}),children:[(0,a.jsx)(b.SelectTrigger,{children:(0,a.jsx)(b.SelectValue,{placeholder:"Pilih Metode"})}),(0,a.jsx)(b.SelectContent,{children:I.map(e=>(0,a.jsx)(b.SelectItem,{value:e.id.toString(),children:e.nama_metode},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Jumlah Bayar / DP (Rp)"}),(0,a.jsx)(h.Input,{type:"text",placeholder:"0",value:M.jumlah_dp,onChange:e=>T({...M,jumlah_dp:e.target.value})}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500",children:"Jika lunas, isi sesuai total tagihan."})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(x.Label,{children:["Status Booking ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)(b.Select,{value:M.status_booking_id,onValueChange:e=>T({...M,status_booking_id:e}),disabled:!0,children:[(0,a.jsx)(b.SelectTrigger,{className:"font-bold text-green-700 bg-green-50 border-green-200",children:(0,a.jsx)(b.SelectValue,{placeholder:"Pilih Status"})}),(0,a.jsx)(b.SelectContent,{children:(0,a.jsx)(b.SelectItem,{value:W,children:K?K.nama_status:"Terkonfirmasi"})})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-start bg-yellow-50 p-2 rounded text-[11px] text-yellow-700 mt-1",children:[(0,a.jsx)(u.Info,{className:"w-3 h-3 mt-0.5"}),(0,a.jsxs)("p",{children:["Booking manual otomatis dianggap ",(0,a.jsx)("b",{children:'"Terkonfirmasi"'})," agar tercatat di Laporan Keuangan."]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Asal Bank / Keterangan (Opsional)"}),(0,a.jsx)(h.Input,{placeholder:"Cth: Cash Tunai",value:M.asal_bank,onChange:e=>T({...M,asal_bank:e.target.value})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.Label,{children:"Upload Bukti (Opsional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.Input,{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&T({...M,bukti_pembayaran:e.target.files[0]})},className:"pl-10 cursor-pointer"}),(0,a.jsx)(c.Image,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,a.jsx)(s.default,{href:"/admin/bookings",children:(0,a.jsx)(g.Button,{variant:"outline",type:"button",className:"h-12 px-8 text-base font-semibold",children:"Batal"})}),(0,a.jsxs)(g.Button,{type:"submit",disabled:C,className:"bg-[#D93F21] hover:bg-[#b9351b] h-12 px-8 text-base font-bold shadow-md",children:[C?(0,a.jsx)(i.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(n.Save,{className:"h-4 w-4 mr-2"}),"Simpan Booking"]})]})]})}e.s(["default",()=>S],99685)}]);