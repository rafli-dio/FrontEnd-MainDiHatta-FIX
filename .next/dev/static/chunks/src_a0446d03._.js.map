{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd-FIX/maindihatta-frontend/src/lib/axios.ts"],"sourcesContent":["import axios, { AxiosInstance } from 'axios';\r\n\r\nconst axiosInstance: AxiosInstance = axios.create({\r\n    baseURL: process.env.NEXT_PUBLIC_BACKEND_URL,\r\n    headers: {\r\n        'X-Requested-With': 'XMLHttpRequest',\r\n        'Accept': 'application/json',\r\n        // 'Content-Type': 'application/json',\r\n    },\r\n    withCredentials: true,\r\n});\r\n\r\nexport default axiosInstance;"],"names":[],"mappings":";;;;AAGa;AAHb;;AAEA,MAAM,gBAA+B,mJAAK,CAAC,MAAM,CAAC;IAC9C,OAAO;IACP,SAAS;QACL,oBAAoB;QACpB,UAAU;IAEd;IACA,iBAAiB;AACrB;uCAEe"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd-FIX/maindihatta-frontend/src/hooks/useAuth.ts"],"sourcesContent":["import useSWR from 'swr';\r\nimport axios from '@/lib/axios';\r\nimport { useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { User } from '@/types';\r\n\r\ninterface UseAuthProps {\r\n    middleware?: 'guest' | 'auth';\r\n    redirectIfAuthenticated?: string;\r\n}\r\n\r\ninterface AuthActions {\r\n    setErrors: (errors: any) => void;\r\n    setStatus?: (status: string | null) => void;\r\n    [key: string]: any;\r\n}\r\n\r\nexport const useAuth = ({ middleware, redirectIfAuthenticated }: UseAuthProps = {}) => {\r\n    const router = useRouter();\r\n    const params = useParams();\r\n\r\n    const { data: user, error, mutate } = useSWR<User>('/api/auth/user', () =>\r\n        axios\r\n            .get('/api/auth/user')\r\n            .then(res => res.data?.data || res.data)\r\n            .catch(error => {\r\n                if (error.response.status !== 409) throw error;\r\n                \r\n                router.push('/verify-email');\r\n            })\r\n    );\r\n\r\n    const csrf = () => axios.get('/sanctum/csrf-cookie');\r\n\r\n    // 3. LOGIN\r\n    const login = async ({ setErrors, setStatus, ...props }: AuthActions) => {\r\n        await csrf();\r\n        setErrors([]);\r\n        setStatus?.(null);\r\n\r\n        try {\r\n            await axios.post('api/login', props);\r\n            await mutate();\r\n        } catch (error: any) {\r\n            if (error.response?.status === 422) {\r\n                setErrors(error.response.data.errors);\r\n                throw error;\r\n            }\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    // 4. REGISTER\r\n    const register = async ({ setErrors, ...props }: AuthActions) => {\r\n        await csrf();\r\n        setErrors([]);\r\n\r\n        try {\r\n            await axios.post('api/register', props);\r\n            await mutate();\r\n        } catch (error: any) {\r\n            if (error.response?.status === 422) {\r\n                setErrors(error.response.data.errors);\r\n                throw error;\r\n            }\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        if (!error) {\r\n            await axios.post('api/auth/logout').then(() => mutate()); \r\n        }\r\n        window.location.pathname = '/login'; \r\n    };\r\n\r\n    useEffect(() => {\r\n        if (middleware === 'guest' && redirectIfAuthenticated && user) {\r\n            try {\r\n                let dest = String(redirectIfAuthenticated);\r\n                if (/^https?:\\/\\//i.test(dest)) {\r\n                    router.push(dest);\r\n                } else {\r\n                    dest = dest.replace(/^\\/+/, '/');\r\n                    router.push(dest);\r\n                }\r\n            } catch (e) {\r\n                router.push(redirectIfAuthenticated);\r\n            }\r\n        }\r\n        \r\n        if (middleware === 'auth' && error) {\r\n             logout();\r\n        }\r\n    }, [user, error, middleware, redirectIfAuthenticated, router]);\r\n\r\n    return {\r\n        user,\r\n        login,\r\n        register,\r\n        logout,\r\n        mutate, \r\n    };\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAcO,MAAM,UAAU,CAAC,EAAE,UAAU,EAAE,uBAAuB,EAAgB,GAAG,CAAC,CAAC;;IAC9E,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,IAAA,4KAAM,EAAO;0BAAkB,IACjE,iIAAK,CACA,GAAG,CAAC,kBACJ,IAAI;kCAAC,CAAA,MAAO,IAAI,IAAI,EAAE,QAAQ,IAAI,IAAI;iCACtC,KAAK;kCAAC,CAAA;oBACH,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK,MAAM;oBAEzC,OAAO,IAAI,CAAC;gBAChB;;;IAGR,MAAM,OAAO,IAAM,iIAAK,CAAC,GAAG,CAAC;IAE7B,WAAW;IACX,MAAM,QAAQ,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoB;QAChE,MAAM;QACN,UAAU,EAAE;QACZ,YAAY;QAEZ,IAAI;YACA,MAAM,iIAAK,CAAC,IAAI,CAAC,aAAa;YAC9B,MAAM;QACV,EAAE,OAAO,OAAY;YACjB,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;gBAChC,UAAU,MAAM,QAAQ,CAAC,IAAI,CAAC,MAAM;gBACpC,MAAM;YACV;YACA,MAAM;QACV;IACJ;IAEA,cAAc;IACd,MAAM,WAAW,OAAO,EAAE,SAAS,EAAE,GAAG,OAAoB;QACxD,MAAM;QACN,UAAU,EAAE;QAEZ,IAAI;YACA,MAAM,iIAAK,CAAC,IAAI,CAAC,gBAAgB;YACjC,MAAM;QACV,EAAE,OAAO,OAAY;YACjB,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;gBAChC,UAAU,MAAM,QAAQ,CAAC,IAAI,CAAC,MAAM;gBACpC,MAAM;YACV;YACA,MAAM;QACV;IACJ;IAEA,MAAM,SAAS;QACX,IAAI,CAAC,OAAO;YACR,MAAM,iIAAK,CAAC,IAAI,CAAC,mBAAmB,IAAI,CAAC,IAAM;QACnD;QACA,OAAO,QAAQ,CAAC,QAAQ,GAAG;IAC/B;IAEA,IAAA,0KAAS;6BAAC;YACN,IAAI,eAAe,WAAW,2BAA2B,MAAM;gBAC3D,IAAI;oBACA,IAAI,OAAO,OAAO;oBAClB,IAAI,gBAAgB,IAAI,CAAC,OAAO;wBAC5B,OAAO,IAAI,CAAC;oBAChB,OAAO;wBACH,OAAO,KAAK,OAAO,CAAC,QAAQ;wBAC5B,OAAO,IAAI,CAAC;oBAChB;gBACJ,EAAE,OAAO,GAAG;oBACR,OAAO,IAAI,CAAC;gBAChB;YACJ;YAEA,IAAI,eAAe,UAAU,OAAO;gBAC/B;YACL;QACJ;4BAAG;QAAC;QAAM;QAAO;QAAY;QAAyB;KAAO;IAE7D,OAAO;QACH;QACA;QACA;QACA;QACA;IACJ;AACJ;GAtFa;;QACM,kJAAS;QACT,kJAAS;QAEc,4KAAM"}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd-FIX/maindihatta-frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, FormEvent, useEffect } from 'react';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { Loader2, Eye, EyeOff } from 'lucide-react';\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter();\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errors, setErrors] = useState<any>([]);\r\n    const [status, setStatus] = useState<string | null>(null);\r\n    const [isLoggingIn, setIsLoggingIn] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const { login, user } = useAuth({\r\n        middleware: 'guest',\r\n    });\r\n\r\n    useEffect(() => {\r\n        let mounted = true;\r\n        const redirect = async () => {\r\n            if (!user) return;\r\n            const roleName = user.role?.name_role;\r\n            const path = roleName === 'Admin' ? '/admin/dashboard' : roleName === 'Karyawan' ? '/karyawan/dashboard' : roleName === 'Pelanggan' ? '/pelanggan/home' : '/';\r\n            try {\r\n                await router.push(path);\r\n            } finally {\r\n                if (mounted) setIsLoggingIn(false);\r\n            }\r\n        };\r\n        redirect();\r\n        return () => { mounted = false; };\r\n    }, [user, router]);\r\n\r\n    // Submit Handler\r\n    const submitForm = async (event: FormEvent) => {\r\n        event.preventDefault();\r\n        \r\n        setIsLoggingIn(true); \r\n        \r\n        setErrors([]); \r\n\r\n        try {\r\n            await login({ \r\n                email, \r\n                password, \r\n                setErrors: (errs) => { setErrors(errs); }, \r\n                setStatus \r\n            });\r\n        } catch (error) {\r\n            setIsLoggingIn(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen w-full bg-white flex flex-col lg:flex-row\">\r\n            \r\n            <div className=\"relative w-full h-[35vh] lg:hidden rounded-b-[40px] overflow-hidden shadow-xl z-10\">\r\n                <Image\r\n                    src=\"/images/gambar-login.png\"\r\n                    alt=\"MainDiHatta Header\"\r\n                    fill\r\n                    className=\"object-cover\"\r\n                    priority\r\n                />\r\n                <div className=\"absolute inset-0 bg-black/10\"></div>\r\n            </div>\r\n\r\n            <div className=\"hidden lg:flex lg:w-1/2 relative bg-black\">\r\n                <Image\r\n                    src=\"/images/gambar-login.png\"\r\n                    alt=\"MainDiHatta Side\"\r\n                    fill\r\n                    className=\"object-cover opacity-90\"\r\n                    priority\r\n                />\r\n            </div>\r\n\r\n            <div className=\"w-full lg:w-1/2 flex flex-col justify-center p-8 md:p-16 flex-1\">\r\n                <div className=\"w-full max-w-md mx-auto space-y-8\">\r\n                    \r\n                    <div className=\"text-center mb-8 mt-4 lg:mt-0\">\r\n                        <h2 className=\"text-3xl font-bold text-gray-900\">\r\n                            Login <span className=\"text-[#D93F21]\">MainDi</span>Hatta.id\r\n                        </h2>\r\n                        {status && (\r\n                            <div className=\"mt-4 p-3 bg-green-50 text-green-600 text-sm rounded-md animate-in fade-in slide-in-from-top-2\">\r\n                                {status}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <form onSubmit={submitForm} className=\"space-y-5\">\r\n                        \r\n                        <div>\r\n                            <input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                className={`w-full px-6 py-3.5 border rounded-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#D93F21] focus:border-transparent transition-all text-sm ${errors.email ? 'border-red-500 ring-1 ring-red-500' : 'border-gray-400'}`}\r\n                                placeholder=\"Email\"\r\n                                required\r\n                                autoFocus\r\n                                disabled={isLoggingIn} \r\n                            />\r\n                            {errors.email && (\r\n                                <p className=\"mt-1 ml-4 text-xs text-red-600 animate-in slide-in-from-left-1\">{errors.email[0]}</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"relative\">\r\n                            <input\r\n                                id=\"password\"\r\n                                type={showPassword ? 'text' : 'password'}\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                className={`w-full px-6 pr-12 py-3.5 border rounded-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#D93F21] focus:border-transparent transition-all text-sm ${errors.password ? 'border-red-500 ring-1 ring-red-500' : 'border-gray-400'}`}\r\n                                placeholder=\"Password\"\r\n                                required\r\n                                disabled={isLoggingIn} \r\n                            />\r\n\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setShowPassword(s => !s)}\r\n                                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700\"\r\n                                aria-label={showPassword ? 'Hide password' : 'Show password'}\r\n                                disabled={isLoggingIn}\r\n                            >\r\n                                {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                            </button>\r\n\r\n                            {errors.password && (\r\n                                <p className=\"mt-1 ml-4 text-xs text-red-600 animate-in slide-in-from-left-1\">{errors.password[0]}</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center px-2\">\r\n                            <input\r\n                                id=\"remember-me\"\r\n                                name=\"remember-me\"\r\n                                type=\"checkbox\"\r\n                                className=\"h-4 w-4 text-[#D93F21] focus:ring-[#D93F21] border-gray-300 rounded-full\"\r\n                                disabled={isLoggingIn}\r\n                            />\r\n                            <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-500\">\r\n                                Remember me\r\n                            </label>\r\n                        </div>\r\n\r\n                        <div className=\"pt-2\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={isLoggingIn}\r\n                                className=\"w-full flex justify-center items-center py-3.5 px-4 border border-transparent rounded-full shadow-sm text-sm font-bold text-white bg-[#D93F21] hover:bg-[#b9351b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#D93F21] transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed\"\r\n                            >\r\n                                {isLoggingIn ? (\r\n                                    <>\r\n                                        <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\r\n                                        Masuk...\r\n                                    </>\r\n                                ) : (\r\n                                    'Sing In'\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n\r\n                    <div className=\"text-center mt-6\">\r\n                        <p className=\"text-xs text-gray-500\">\r\n                            Don't have acount ?{' '}\r\n                            <Link href=\"/register\" className={`font-bold text-gray-900 hover:underline ${isLoggingIn ? 'pointer-events-none opacity-50' : ''}`}>\r\n                                Sign Up now\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AAPA;;;;;;;AASe,SAAS;;IACpB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAM,EAAE;IAC5C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAgB;IACpD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,IAAA,qIAAO,EAAC;QAC5B,YAAY;IAChB;IAEA,IAAA,0KAAS;+BAAC;YACN,IAAI,UAAU;YACd,MAAM;gDAAW;oBACb,IAAI,CAAC,MAAM;oBACX,MAAM,WAAW,KAAK,IAAI,EAAE;oBAC5B,MAAM,OAAO,aAAa,UAAU,qBAAqB,aAAa,aAAa,wBAAwB,aAAa,cAAc,oBAAoB;oBAC1J,IAAI;wBACA,MAAM,OAAO,IAAI,CAAC;oBACtB,SAAU;wBACN,IAAI,SAAS,eAAe;oBAChC;gBACJ;;YACA;YACA;uCAAO;oBAAQ,UAAU;gBAAO;;QACpC;8BAAG;QAAC;QAAM;KAAO;IAEjB,iBAAiB;IACjB,MAAM,aAAa,OAAO;QACtB,MAAM,cAAc;QAEpB,eAAe;QAEf,UAAU,EAAE;QAEZ,IAAI;YACA,MAAM,MAAM;gBACR;gBACA;gBACA,WAAW,CAAC;oBAAW,UAAU;gBAAO;gBACxC;YACJ;QACJ,EAAE,OAAO,OAAO;YACZ,eAAe;QACnB;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC,2IAAK;wBACF,KAAI;wBACJ,KAAI;wBACJ,IAAI;wBACJ,WAAU;wBACV,QAAQ;;;;;;kCAEZ,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGnB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,2IAAK;oBACF,KAAI;oBACJ,KAAI;oBACJ,IAAI;oBACJ,WAAU;oBACV,QAAQ;;;;;;;;;;;0BAIhB,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCAEX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;;wCAAmC;sDACvC,6LAAC;4CAAK,WAAU;sDAAiB;;;;;;wCAAa;;;;;;;gCAEvD,wBACG,6LAAC;oCAAI,WAAU;8CACV;;;;;;;;;;;;sCAKb,6LAAC;4BAAK,UAAU;4BAAY,WAAU;;8CAElC,6LAAC;;sDACG,6LAAC;4CACG,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,WAAW,CAAC,+KAA+K,EAAE,OAAO,KAAK,GAAG,uCAAuC,mBAAmB;4CACtQ,aAAY;4CACZ,QAAQ;4CACR,SAAS;4CACT,UAAU;;;;;;wCAEb,OAAO,KAAK,kBACT,6LAAC;4CAAE,WAAU;sDAAkE,OAAO,KAAK,CAAC,EAAE;;;;;;;;;;;;8CAItG,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CACG,IAAG;4CACH,MAAM,eAAe,SAAS;4CAC9B,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAW,CAAC,qLAAqL,EAAE,OAAO,QAAQ,GAAG,uCAAuC,mBAAmB;4CAC/Q,aAAY;4CACZ,QAAQ;4CACR,UAAU;;;;;;sDAGd,6LAAC;4CACG,MAAK;4CACL,SAAS,IAAM,gBAAgB,CAAA,IAAK,CAAC;4CACrC,WAAU;4CACV,cAAY,eAAe,kBAAkB;4CAC7C,UAAU;sDAET,6BAAe,6LAAC,uNAAM;gDAAC,WAAU;;;;;qEAAe,6LAAC,0MAAG;gDAAC,WAAU;;;;;;;;;;;wCAGnE,OAAO,QAAQ,kBACZ,6LAAC;4CAAE,WAAU;sDAAkE,OAAO,QAAQ,CAAC,EAAE;;;;;;;;;;;;8CAIzG,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CACG,IAAG;4CACH,MAAK;4CACL,MAAK;4CACL,WAAU;4CACV,UAAU;;;;;;sDAEd,6LAAC;4CAAM,SAAQ;4CAAc,WAAU;sDAAmC;;;;;;;;;;;;8CAK9E,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCACG,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,4BACG;;8DACI,6LAAC,+NAAO;oDAAC,WAAU;;;;;;gDAA8B;;2DAIrD;;;;;;;;;;;;;;;;;sCAMhB,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAE,WAAU;;oCAAwB;oCACb;kDACpB,6LAAC,0KAAI;wCAAC,MAAK;wCAAY,WAAW,CAAC,wCAAwC,EAAE,cAAc,mCAAmC,IAAI;kDAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUhK;GAlLwB;;QACL,kJAAS;QASA,qIAAO;;;KAVX"}}]
}