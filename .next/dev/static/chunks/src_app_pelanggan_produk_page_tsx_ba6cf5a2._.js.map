{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/app/pelanggan/produk/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport axios from '@/lib/axios';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link'; // Import Link\r\nimport { Search, ShoppingBag, UtensilsCrossed, ArrowRight, Plus } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useAuth } from '@/hooks/useAuth';\r\n\r\n// UI Components\r\nimport { Button } from '@/components/ui/button';\r\n\r\n\r\n// Types\r\nimport { ProdukResto, Kategori } from '@/types';\r\n\r\ninterface CartItem extends ProdukResto {\r\n    qty: number;\r\n}\r\n\r\nexport default function ProdukPage() {\r\n    const { user } = useAuth({ middleware: 'auth' });\r\n\r\n    // State Data\r\n    const [products, setProducts] = useState<ProdukResto[]>([]);\r\n    const [categories, setCategories] = useState<Kategori[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // State Filter\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [selectedCategory, setSelectedCategory] = useState<string>('All');\r\n\r\n    // 1. Fetch Data\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [resProd, resKat] = await Promise.all([\r\n                    axios.get('/api/produkRestos'),\r\n                    axios.get('/api/kategoris')\r\n                ]);\r\n                setProducts(resProd.data);\r\n                setCategories(resKat.data);\r\n            } catch (error) {\r\n                console.error(error);\r\n                toast.error(\"Gagal memuat menu.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    // Helper Format Rupiah\r\n    const formatRupiah = (num: number) => \r\n        new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(num);\r\n\r\n    // 2. Filter Logic\r\n    const filteredProducts = products.filter(item => {\r\n        const matchSearch = item.nama_produk.toLowerCase().includes(searchQuery.toLowerCase());\r\n        const matchCategory = selectedCategory === 'All' || (item.kategori?.nama_kategori === selectedCategory);\r\n        return matchSearch && matchCategory && item.is_tersedia;\r\n    });\r\n\r\n    // --- LOGIKA KERANJANG (Hanya Add to Cart) ---\r\n    // Halaman ini tidak menampilkan keranjang penuh (itu ada di POS), tapi kita bisa kasih notif sukses.\r\n    const addToCart = (product: ProdukResto) => {\r\n        // Di sini Anda bisa implementasi simpan ke localStorage atau Context API jika ingin Cart persisten\r\n        toast.success(`${product.nama_produk} ditambahkan ke pesanan!`, {\r\n            description: \"Silakan hubungi kasir untuk memproses.\",\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#f8f9fa] font-sans text-gray-900\">\r\n\r\n            <main className=\"max-w-7xl mx-auto px-6 py-12 min-h-[80vh]\">\r\n                \r\n                {/* Header Section */}\r\n                <div className=\"text-center mb-12\">\r\n                    <span className=\"text-[#D93F21] font-bold uppercase tracking-widest text-xs bg-[#D93F21]/10 px-4 py-2 rounded-full\">\r\n                        Our Menu\r\n                    </span>\r\n                    <h1 className=\"text-4xl md:text-5xl font-extrabold text-gray-900 mt-4 mb-4\">\r\n                        Explore Produk Makanan & <br/> <span className=\"text-[#D93F21]\">Minuman di sini</span>\r\n                    </h1>\r\n                    <p className=\"text-gray-500 max-w-2xl mx-auto\">\r\n                        Nikmati hidangan lezat dan menyegarkan setelah bermain basket.\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Filter & Search Bar */}\r\n                <div className=\"flex flex-col md:flex-row justify-between items-center gap-6 mb-10 bg-white p-4 rounded-2xl shadow-sm border border-gray-100 sticky top-24 z-40\">\r\n                    {/* Kategori Tabs */}\r\n                    <div className=\"flex gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0 no-scrollbar\">\r\n                        <button onClick={() => setSelectedCategory('All')} className={`px-6 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap ${selectedCategory === 'All' ? 'bg-[#D93F21] text-white shadow-md' : 'bg-gray-50 text-gray-600 hover:bg-gray-100'}`}>All Menu</button>\r\n                        {categories.map((cat) => (\r\n                            <button key={cat.id} onClick={() => setSelectedCategory(cat.nama_kategori)} className={`px-6 py-2.5 rounded-full text-sm font-bold transition-all whitespace-nowrap ${selectedCategory === cat.nama_kategori ? 'bg-[#D93F21] text-white shadow-md' : 'bg-gray-50 text-gray-600 hover:bg-gray-100'}`}>\r\n                                {cat.nama_kategori}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Search Input */}\r\n                    <div className=\"relative w-full md:w-80\">\r\n                        <input \r\n                            type=\"text\" \r\n                            placeholder=\"Cari menu favoritmu...\" \r\n                            className=\"w-full pl-11 pr-4 py-3 bg-gray-50 border-transparent focus:bg-white focus:border-[#D93F21] rounded-full text-sm transition-all outline-none ring-0 focus:ring-2 focus:ring-[#D93F21]/20\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                        <Search className=\"w-5 h-5 absolute left-4 top-3 text-gray-400\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Product Grid */}\r\n                {loading ? (\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 animate-pulse\">\r\n                        {[1, 2, 3, 4, 5, 6, 7, 8].map((i) => <div key={i} className=\"bg-gray-200 h-80 rounded-[2rem]\"></div>)}\r\n                    </div>\r\n                ) : filteredProducts.length === 0 ? (\r\n                    <div className=\"text-center py-20 bg-white rounded-[2rem] border border-dashed border-gray-200\">\r\n                        <UtensilsCrossed className=\"w-10 h-10 text-gray-300 mx-auto mb-4\" />\r\n                        <h3 className=\"text-xl font-bold text-gray-900\">Menu Tidak Ditemukan</h3>\r\n                        <Button variant=\"outline\" className=\"mt-6\" onClick={() => { setSearchQuery(''); setSelectedCategory('All'); }}>Reset Filter</Button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\">\r\n                        {filteredProducts.map((item) => (\r\n                            // WRAPPER UTAMA: Relative agar tombol order bisa di atas Link\r\n                            <div key={item.id} className=\"group bg-white rounded-[2rem] p-4 border border-gray-100 hover:border-[#D93F21]/30 hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 relative overflow-hidden flex flex-col h-full\">\r\n                                \r\n                                {/* LINK KE DETAIL: Bungkus area gambar dan judul */}\r\n                                <Link href={`/pelanggan/produk/${item.id}`} className=\"flex-1 flex flex-col cursor-pointer\">\r\n                                    <div className=\"relative h-56 w-full rounded-[1.5rem] overflow-hidden mb-5 bg-gray-100\">\r\n                                        <Image \r\n                                            src={item.foto_url || '/images/placeholder-food.jpg'} \r\n                                            alt={item.nama_produk} \r\n                                            fill \r\n                                            className=\"object-cover group-hover:scale-110 transition-transform duration-700\" \r\n                                            unoptimized\r\n                                        />\r\n                                        <div className=\"absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-gray-800 shadow-sm z-10\">\r\n                                            {item.kategori?.nama_kategori}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"px-2 pb-2 flex flex-col flex-1\">\r\n                                        <h3 className=\"text-lg font-bold text-gray-900 line-clamp-2 group-hover:text-[#D93F21] transition-colors mb-1\">\r\n                                            {item.nama_produk}\r\n                                        </h3>\r\n                                        <p className=\"text-sm text-gray-500 line-clamp-2 min-h-[40px]\">\r\n                                            {item.deskripsi || 'Menu spesial dari MainDiHatta.'}\r\n                                        </p>\r\n                                    </div>\r\n                                </Link>\r\n\r\n                                {/* TOMBOL ORDER & HARGA (Terpisah dari Link agar tidak memicu navigasi saat diklik) */}\r\n                                <div className=\"px-2 flex justify-between items-center pt-4 border-t border-gray-100 mt-auto\">\r\n                                    <div>\r\n                                        <p className=\"text-xs text-gray-400 font-medium\">Harga</p>\r\n                                        <p className=\"text-xl font-extrabold text-gray-900\">{formatRupiah(Number(item.harga_jual))}</p>\r\n                                    </div>\r\n                                    \r\n                                    <Button \r\n                                        size=\"sm\" \r\n                                        className=\"bg-white text-[#D93F21] border border-[#D93F21] hover:bg-[#D93F21] hover:text-white rounded-full font-bold transition-colors h-9 px-4 z-20 relative\"\r\n                                        onClick={(e) => {\r\n                                            e.stopPropagation(); // Mencegah klik tembus ke Link\r\n                                            e.preventDefault(); \r\n                                            addToCart(item);\r\n                                        }}\r\n                                    >\r\n                                        Order <span className=\"ml-1 bg-[#D93F21]/10 p-0.5 rounded-full\"><Plus className=\"w-3 h-3\" /></span>\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </main>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}