{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/lib/axios.ts"],"sourcesContent":["import axios, { AxiosInstance } from 'axios';\r\n\r\nconst axiosInstance: AxiosInstance = axios.create({\r\n    baseURL: process.env.NEXT_PUBLIC_BACKEND_URL,\r\n    headers: {\r\n        'X-Requested-With': 'XMLHttpRequest',\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n    },\r\n    withCredentials: true,\r\n});\r\n\r\nexport default axiosInstance;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAA+B,gJAAK,CAAC,MAAM,CAAC;IAC9C,OAAO;IACP,SAAS;QACL,oBAAoB;QACpB,UAAU;QACV,gBAAgB;IACpB;IACA,iBAAiB;AACrB;uCAEe"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/hooks/useAuth.ts"],"sourcesContent":["import useSWR from 'swr';\r\nimport axios from '@/lib/axios';\r\nimport { useEffect } from 'react';\r\nimport { useRouter, useParams } from 'next/navigation';\r\nimport { User } from '@/types'; // Menggunakan tipe data yang sudah kita buat\r\n\r\ninterface UseAuthProps {\r\n    middleware?: 'guest' | 'auth';\r\n    redirectIfAuthenticated?: string;\r\n}\r\n\r\ninterface AuthActions {\r\n    setErrors: (errors: any) => void;\r\n    setStatus?: (status: string | null) => void;\r\n    [key: string]: any;\r\n}\r\n\r\nexport const useAuth = ({ middleware, redirectIfAuthenticated }: UseAuthProps = {}) => {\r\n    const router = useRouter();\r\n    const params = useParams();\r\n\r\n    // 1. FETCH USER (Menggunakan SWR)\r\n    // SWR otomatis mengecek status login di background.\r\n    // Jika endpoint '/api/auth/user' error (401), berarti belum login.\r\n    const { data: user, error, mutate } = useSWR<User>('/api/auth/user', () =>\r\n        axios\r\n            .get('/api/auth/user')\r\n            .then(res => res.data)\r\n            .catch(error => {\r\n                if (error.response.status !== 409) throw error;\r\n                \r\n                // Jika 409, verifikasi ulang email (opsional, biasanya untuk fitur verifikasi email)\r\n                router.push('/verify-email');\r\n            })\r\n    );\r\n\r\n    // 2. CSRF TOKEN\r\n    // Wajib dipanggil sebelum login/register/logout\r\n    const csrf = () => axios.get('/sanctum/csrf-cookie');\r\n\r\n    // 3. LOGIN\r\n    const login = async ({ setErrors, setStatus, ...props }: AuthActions) => {\r\n        await csrf();\r\n        setErrors([]);\r\n        setStatus?.(null);\r\n\r\n        axios\r\n            .post('/api/login', props)\r\n            .then(() => mutate()) // Refresh data user setelah login sukses\r\n            .catch(error => {\r\n                if (error.response.status !== 422) throw error;\r\n                // Tangkap error validasi dari Laravel\r\n                setErrors(error.response.data.errors);\r\n            });\r\n    };\r\n\r\n    // 4. REGISTER\r\n    const register = async ({ setErrors, ...props }: AuthActions) => {\r\n        await csrf();\r\n        setErrors([]);\r\n\r\n        axios\r\n            .post('/api/register', props)\r\n            .then(() => mutate()) // Refresh data user setelah register sukses\r\n            .catch(error => {\r\n                if (error.response.status !== 422) throw error;\r\n                setErrors(error.response.data.errors);\r\n            });\r\n    };\r\n\r\n    // 5. LOGOUT\r\n    const logout = async () => {\r\n        if (!error) {\r\n            await axios.post('/api/auth/logout').then(() => mutate()); // Kosongkan data user\r\n        }\r\n        window.location.pathname = '/login'; // Redirect paksa ke login\r\n    };\r\n\r\n    // 6. LOGIKA MIDDLEWARE (REDIRECT OTOMATIS)\r\n    // useEffect ini menjaga keamanan halaman.\r\n    useEffect(() => {\r\n        if (middleware === 'guest' && redirectIfAuthenticated && user) {\r\n            // Jika user SUDAH login tapi mencoba buka halaman login ('guest'),\r\n            // lempar ke dashboard.\r\n            router.push(redirectIfAuthenticated);\r\n        }\r\n        \r\n        if (middleware === 'auth' && error) {\r\n             // Jika user BELUM login (error) tapi mencoba buka halaman admin ('auth'),\r\n             // lempar ke logout/login.\r\n             logout();\r\n        }\r\n    }, [user, error, middleware, redirectIfAuthenticated, router]);\r\n\r\n    return {\r\n        user,\r\n        login,\r\n        register,\r\n        logout,\r\n    };\r\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAcO,MAAM,UAAU,CAAC,EAAE,UAAU,EAAE,uBAAuB,EAAgB,GAAG,CAAC,CAAC;IAC9E,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,SAAS,IAAA,+IAAS;IAExB,kCAAkC;IAClC,oDAAoD;IACpD,mEAAmE;IACnE,MAAM,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,IAAA,yKAAM,EAAO,kBAAkB,IACjE,8HAAK,CACA,GAAG,CAAC,kBACJ,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,EACpB,KAAK,CAAC,CAAA;YACH,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK,MAAM;YAEzC,qFAAqF;YACrF,OAAO,IAAI,CAAC;QAChB;IAGR,gBAAgB;IAChB,gDAAgD;IAChD,MAAM,OAAO,IAAM,8HAAK,CAAC,GAAG,CAAC;IAE7B,WAAW;IACX,MAAM,QAAQ,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoB;QAChE,MAAM;QACN,UAAU,EAAE;QACZ,YAAY;QAEZ,8HAAK,CACA,IAAI,CAAC,cAAc,OACnB,IAAI,CAAC,IAAM,UAAU,yCAAyC;SAC9D,KAAK,CAAC,CAAA;YACH,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK,MAAM;YACzC,sCAAsC;YACtC,UAAU,MAAM,QAAQ,CAAC,IAAI,CAAC,MAAM;QACxC;IACR;IAEA,cAAc;IACd,MAAM,WAAW,OAAO,EAAE,SAAS,EAAE,GAAG,OAAoB;QACxD,MAAM;QACN,UAAU,EAAE;QAEZ,8HAAK,CACA,IAAI,CAAC,iBAAiB,OACtB,IAAI,CAAC,IAAM,UAAU,4CAA4C;SACjE,KAAK,CAAC,CAAA;YACH,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK,MAAM;YACzC,UAAU,MAAM,QAAQ,CAAC,IAAI,CAAC,MAAM;QACxC;IACR;IAEA,YAAY;IACZ,MAAM,SAAS;QACX,IAAI,CAAC,OAAO;YACR,MAAM,8HAAK,CAAC,IAAI,CAAC,oBAAoB,IAAI,CAAC,IAAM,WAAW,sBAAsB;QACrF;QACA,OAAO,QAAQ,CAAC,QAAQ,GAAG,UAAU,0BAA0B;IACnE;IAEA,2CAA2C;IAC3C,0CAA0C;IAC1C,IAAA,kNAAS,EAAC;QACN,IAAI,eAAe,WAAW,2BAA2B,MAAM;YAC3D,mEAAmE;YACnE,uBAAuB;YACvB,OAAO,IAAI,CAAC;QAChB;QAEA,IAAI,eAAe,UAAU,OAAO;YAC/B,0EAA0E;YAC1E,0BAA0B;YAC1B;QACL;IACJ,GAAG;QAAC;QAAM;QAAO;QAAY;QAAyB;KAAO;IAE7D,OAAO;QACH;QACA;QACA;QACA;IACJ;AACJ"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, FormEvent } from 'react';\r\nimport Image from 'next/image';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/hooks/useAuth';\r\n\r\nexport default function LoginPage() {\r\n    // State\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errors, setErrors] = useState<any>([]);\r\n    const [status, setStatus] = useState<string | null>(null);\r\n\r\n    // Hook Auth\r\n    const { login } = useAuth({\r\n        middleware: 'guest',\r\n        redirectIfAuthenticated: '/dashboard',\r\n    });\r\n\r\n    // Submit Handler\r\n    const submitForm = async (event: FormEvent) => {\r\n        event.preventDefault();\r\n        login({ email, password, setErrors, setStatus });\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen w-full bg-white flex flex-col lg:flex-row\">\r\n            \r\n            {/* --------------------------------------------------------- */}\r\n            {/* 1. LAYOUT MOBILE: Header Gambar Melengkung (Hanya tampil di HP) */}\r\n            {/* --------------------------------------------------------- */}\r\n            <div className=\"relative w-full h-[35vh] lg:hidden rounded-b-[40px] overflow-hidden shadow-xl z-10\">\r\n                <Image\r\n                    src=\"/images/gambar-login-mobile.png\" \r\n                    alt=\"MainDiHatta Header\"\r\n                    fill\r\n                    className=\"object-cover\"\r\n                    priority\r\n                />\r\n\r\n                <div className=\"absolute inset-0 bg-black/10\"></div>\r\n            </div>\r\n\r\n            <div className=\"hidden lg:flex lg:w-1/2 relative bg-black\">\r\n                <Image\r\n                    src=\"/images/gambar-login.png\"\r\n                    alt=\"MainDiHatta Side\"\r\n                    fill\r\n                    className=\"object-cover opacity-90\"\r\n                    priority\r\n                />\r\n            </div>\r\n\r\n            <div className=\"w-full lg:w-1/2 flex flex-col justify-center p-8 md:p-16 flex-1\">\r\n                <div className=\"w-full max-w-md mx-auto space-y-8\">\r\n                    \r\n                    {/* Judul */}\r\n                    <div className=\"text-center mb-8 mt-4 lg:mt-0\">\r\n                        <h2 className=\"text-3xl font-bold text-gray-900\">\r\n                            Login <span className=\"text-[#D93F21]\">MainDi</span>Hatta.id\r\n                        </h2>\r\n                        {status && (\r\n                            <div className=\"mt-4 p-3 bg-green-50 text-green-600 text-sm rounded-md\">\r\n                                {status}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <form onSubmit={submitForm} className=\"space-y-5\">\r\n                        \r\n                        {/* Input Email */}\r\n                        <div>\r\n                            <input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                className=\"w-full px-6 py-3.5 border border-gray-400 rounded-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#D93F21] focus:border-transparent transition-all text-sm\"\r\n                                placeholder=\"Email\"\r\n                                required\r\n                            />\r\n                            {errors.email && (\r\n                                <p className=\"mt-1 ml-4 text-xs text-red-600\">{errors.email[0]}</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Input Password */}\r\n                        <div>\r\n                            <input\r\n                                id=\"password\"\r\n                                type=\"password\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                className=\"w-full px-6 py-3.5 border border-gray-400 rounded-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#D93F21] focus:border-transparent transition-all text-sm\"\r\n                                placeholder=\"Password\"\r\n                                required\r\n                            />\r\n                            {errors.password && (\r\n                                <p className=\"mt-1 ml-4 text-xs text-red-600\">{errors.password[0]}</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Remember Me */}\r\n                        <div className=\"flex items-center px-2\">\r\n                            <input\r\n                                id=\"remember-me\"\r\n                                name=\"remember-me\"\r\n                                type=\"checkbox\"\r\n                                className=\"h-4 w-4 text-[#D93F21] focus:ring-[#D93F21] border-gray-300 rounded-full\"\r\n                            />\r\n                            <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-500\">\r\n                                Remember me\r\n                            </label>\r\n                        </div>\r\n\r\n                        {/* Tombol Login (Sing In) */}\r\n                        <div className=\"pt-2\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"w-full flex justify-center py-3.5 px-4 border border-transparent rounded-full shadow-sm text-sm font-bold text-white bg-[#D93F21] hover:bg-[#b9351b] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#D93F21] transition-colors duration-200\"\r\n                            >\r\n                                Sing In\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n\r\n                    {/* Footer: Sign Up */}\r\n                    <div className=\"text-center mt-6\">\r\n                        <p className=\"text-xs text-gray-500\">\r\n                            Don't have acount ?{' '}\r\n                            <Link href=\"/register\" className=\"font-bold text-gray-900 hover:underline\">\r\n                                Sign Up now\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACpB,QAAQ;IACR,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAM,EAAE;IAC5C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAgB;IAEpD,YAAY;IACZ,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,kIAAO,EAAC;QACtB,YAAY;QACZ,yBAAyB;IAC7B;IAEA,iBAAiB;IACjB,MAAM,aAAa,OAAO;QACtB,MAAM,cAAc;QACpB,MAAM;YAAE;YAAO;YAAU;YAAW;QAAU;IAClD;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAKX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,wIAAK;wBACF,KAAI;wBACJ,KAAI;wBACJ,IAAI;wBACJ,WAAU;wBACV,QAAQ;;;;;;kCAGZ,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGnB,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,wIAAK;oBACF,KAAI;oBACJ,KAAI;oBACJ,IAAI;oBACJ,WAAU;oBACV,QAAQ;;;;;;;;;;;0BAIhB,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCAGX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;;wCAAmC;sDACvC,8OAAC;4CAAK,WAAU;sDAAiB;;;;;;wCAAa;;;;;;;gCAEvD,wBACG,8OAAC;oCAAI,WAAU;8CACV;;;;;;;;;;;;sCAKb,8OAAC;4BAAK,UAAU;4BAAY,WAAU;;8CAGlC,8OAAC;;sDACG,8OAAC;4CACG,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,WAAU;4CACV,aAAY;4CACZ,QAAQ;;;;;;wCAEX,OAAO,KAAK,kBACT,8OAAC;4CAAE,WAAU;sDAAkC,OAAO,KAAK,CAAC,EAAE;;;;;;;;;;;;8CAKtE,8OAAC;;sDACG,8OAAC;4CACG,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,WAAU;4CACV,aAAY;4CACZ,QAAQ;;;;;;wCAEX,OAAO,QAAQ,kBACZ,8OAAC;4CAAE,WAAU;sDAAkC,OAAO,QAAQ,CAAC,EAAE;;;;;;;;;;;;8CAKzE,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CACG,IAAG;4CACH,MAAK;4CACL,MAAK;4CACL,WAAU;;;;;;sDAEd,8OAAC;4CAAM,SAAQ;4CAAc,WAAU;sDAAmC;;;;;;;;;;;;8CAM9E,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC;wCACG,MAAK;wCACL,WAAU;kDACb;;;;;;;;;;;;;;;;;sCAOT,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC;gCAAE,WAAU;;oCAAwB;oCACb;kDACpB,8OAAC,uKAAI;wCAAC,MAAK;wCAAY,WAAU;kDAA0C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUvG"}}]
}