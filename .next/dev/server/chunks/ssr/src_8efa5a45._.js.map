{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/hooks/pelanggan/usePembayaranPage.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport axios from '@/lib/axios';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { toast } from 'sonner';\r\nimport { useAuth } from '@/hooks/useAuth';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { PaymentMethod } from '@/types';\r\n\r\nexport function usePembayaranPage() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const tableNumber = searchParams.get('table');\r\n    const { user } = useAuth({ middleware: 'auth' });\r\n    \r\n    const { cart, totalPrice, totalItems, clearCart } = useCart();\r\n\r\n    const [paymentMethods, setPaymentMethods] = useState<PaymentMethod[]>([]);\r\n    const [selectedPayment, setSelectedPayment] = useState<number | null>(null);\r\n    const [selectedPaymentName, setSelectedPaymentName] = useState<string>(''); \r\n    \r\n    const [isProcessing, setIsProcessing] = useState(false);\r\n    \r\n    // 1. TAMBAHKAN STATE INI: Penanda sedang redirect sukses\r\n    const [isRedirecting, setIsRedirecting] = useState(false);\r\n\r\n    // 2. UPDATE VALIDASI: Jangan redirect balik jika sedang sukses\r\n    useEffect(() => {\r\n        if (cart.length === 0 && !isRedirecting) {\r\n            router.replace('/pelanggan/produk');\r\n        }\r\n    }, [cart, router, isRedirecting]);\r\n\r\n    // Fetch Payment Methods\r\n    useEffect(() => {\r\n        const fetchPayments = async () => {\r\n            try {\r\n                const res = await axios.get('/api/paymentMethods');\r\n                setPaymentMethods(res.data.filter((p: any) => p.is_aktif));\r\n            } catch (error) {\r\n                console.error(error);\r\n                toast.error(\"Gagal memuat metode pembayaran.\");\r\n            }\r\n        };\r\n        fetchPayments();\r\n    }, []);\r\n\r\n    // Handlers\r\n    const handleSelectPayment = (method: PaymentMethod) => {\r\n        setSelectedPayment(method.id);\r\n        setSelectedPaymentName(method.nama_metode);\r\n    };\r\n\r\n    const handlePayNow = async () => {\r\n        if (!selectedPayment) return toast.error(\"Pilih metode pembayaran!\");\r\n        if (cart.length === 0) return toast.error(\"Keranjang kosong.\");\r\n        if (!tableNumber) return toast.error(\"Nomor meja hilang. Silakan ulangi pemesanan.\");\r\n\r\n        setIsProcessing(true);\r\n        try {\r\n            const validItems = cart.filter(i => i.qty > 0);\r\n            if (validItems.length === 0) throw new Error('Item tidak valid.');\r\n\r\n            const payload = {\r\n                payment_method_id: selectedPayment,\r\n                total_bayar: 0, \r\n                nama_pelanggan: `${user?.name || 'Guest'} (Meja ${tableNumber})`,\r\n                nomor_meja: tableNumber,\r\n                items: validItems.map(item => ({\r\n                    produk_resto_id: item.id,\r\n                    jumlah: item.qty,\r\n                    catatan: item.catatan || null\r\n                }))\r\n            };\r\n\r\n            const res = await axios.post('/api/transaksiRestos', payload);\r\n            \r\n            // 3. UPDATE LOGIKA: Set flag redirect dulu -> Clear Cart -> Pindah Halaman\r\n            setIsRedirecting(true); // Kunci agar useEffect tidak menendang balik\r\n            clearCart(); \r\n            \r\n            const isCash = selectedPaymentName.toLowerCase().includes('cash') || \r\n                           selectedPaymentName.toLowerCase().includes('tunai');\r\n            const type = isCash ? 'cash' : 'transfer';\r\n\r\n            router.push(`/pelanggan/pembayaran/sukses?code=${res.data.kode_transaksi}&type=${type}`);\r\n\r\n        } catch (error: any) {\r\n            console.error('Payment error:', error);\r\n            const msg = error?.response?.data?.message || error?.message || \"Gagal memproses pesanan.\";\r\n            toast.error(msg);\r\n            setIsProcessing(false);\r\n        } \r\n    };\r\n\r\n    const formatRupiah = (num: number) => \r\n        new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(num);\r\n\r\n    return {\r\n        user,\r\n        cart,\r\n        totalPrice,\r\n        totalItems,\r\n        tableNumber,\r\n        paymentMethods,\r\n        selectedPayment,\r\n        isProcessing,\r\n        handleSelectPayment,\r\n        handlePayNow,\r\n        formatRupiah\r\n    };\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/components/pelanggan/pembayaran/CustomerInfoCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { User } from 'lucide-react';\r\n\r\ninterface CustomerInfoCardProps {\r\n    userName: string;\r\n    tableNumber: string | null;\r\n}\r\n\r\nexport default function CustomerInfoCard({ userName, tableNumber }: CustomerInfoCardProps) {\r\n    return (\r\n        <div className=\"bg-gray-50 rounded-[2rem] p-6 border border-gray-100\">\r\n            <h3 className=\"text-[#D93F21] font-bold text-lg mb-4 flex items-center gap-2\">\r\n                <User className=\"w-5 h-5\" /> Info Pemesan\r\n            </h3>\r\n            <div className=\"space-y-3 pl-1\">\r\n                <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\r\n                    <span className=\"text-gray-500 text-sm\">Nama Pelanggan</span>\r\n                    <span className=\"font-bold\">{userName}</span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\r\n                    <span className=\"text-gray-500 text-sm\">Nomor Meja</span>\r\n                    <span className=\"font-bold text-xl text-[#D93F21]\">{tableNumber || '-'}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,iBAAiB,EAAE,QAAQ,EAAE,WAAW,EAAyB;IACrF,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;;kCACV,8OAAC,0MAAI;wBAAC,WAAU;;;;;;oBAAY;;;;;;;0BAEhC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;0CAAwB;;;;;;0CACxC,8OAAC;gCAAK,WAAU;0CAAa;;;;;;;;;;;;kCAEjC,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAK,WAAU;0CAAwB;;;;;;0CACxC,8OAAC;gCAAK,WAAU;0CAAoC,eAAe;;;;;;;;;;;;;;;;;;;;;;;;AAKvF"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,mNAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,6KAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,6KAAuB,CAAC,WAAW"}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/components/pelanggan/pembayaran/OrderSummaryCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Image from 'next/image';\r\nimport { Separator } from '@/components/ui/separator';\r\n\r\ninterface CartItem {\r\n    id: number;\r\n    nama_produk: string;\r\n    harga_jual: number;\r\n    qty: number;\r\n    foto_url?: string;\r\n    catatan?: string;\r\n}\r\n\r\ninterface OrderSummaryCardProps {\r\n    cart: CartItem[];\r\n    totalItems: number;\r\n    totalPrice: number;\r\n    formatRupiah: (val: number) => string;\r\n}\r\n\r\nexport default function OrderSummaryCard({ cart, totalItems, totalPrice, formatRupiah }: OrderSummaryCardProps) {\r\n    return (\r\n        <div className=\"bg-white rounded-[2rem] p-6 border border-gray-200 shadow-sm\">\r\n            <h3 className=\"font-bold text-xl mb-4\">Rincian Menu ({totalItems})</h3>\r\n            \r\n            <div className=\"space-y-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar\">\r\n                {cart.map((item) => (\r\n                    <div key={item.id} className=\"flex items-center gap-4\">\r\n                        <div className=\"w-16 h-16 rounded-xl overflow-hidden relative bg-gray-100 shrink-0 border border-gray-100\">\r\n                            <Image \r\n                                src={item.foto_url || '/images/placeholder-food.jpg'} \r\n                                alt={item.nama_produk} \r\n                                fill \r\n                                className=\"object-cover\" \r\n                                unoptimized \r\n                            />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <p className=\"font-bold text-gray-900 text-sm\">{item.nama_produk}</p>\r\n                            <p className=\"text-xs text-gray-500\">{item.qty} x {formatRupiah(Number(item.harga_jual))}</p>\r\n                            {item.catatan && <p className=\"text-xs text-orange-500 italic mt-0.5\">Note: {item.catatan}</p>}\r\n                        </div>\r\n                        <p className=\"font-bold text-sm text-[#D93F21]\">\r\n                            {formatRupiah(Number(item.harga_jual) * item.qty)}\r\n                        </p>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            \r\n            <Separator className=\"my-6\" />\r\n            \r\n            <div className=\"space-y-2 text-sm\">\r\n                <div className=\"flex justify-between text-gray-500\">\r\n                    <span>Subtotal</span>\r\n                    <span>{formatRupiah(totalPrice)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between text-gray-500\">\r\n                    <span>Pajak (0%)</span>\r\n                    <span>Rp 0</span>\r\n                </div>\r\n                <div className=\"flex justify-between font-extrabold text-2xl text-gray-900 mt-4\">\r\n                    <span>Total Bayar</span>\r\n                    <span className=\"text-[#D93F21]\">{formatRupiah(totalPrice)}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAqBe,SAAS,iBAAiB,EAAE,IAAI,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAyB;IAC1G,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;;oBAAyB;oBAAe;oBAAW;;;;;;;0BAEjE,8OAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,qBACP,8OAAC;wBAAkB,WAAU;;0CACzB,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC,wIAAK;oCACF,KAAK,KAAK,QAAQ,IAAI;oCACtB,KAAK,KAAK,WAAW;oCACrB,IAAI;oCACJ,WAAU;oCACV,WAAW;;;;;;;;;;;0CAGnB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAE,WAAU;kDAAmC,KAAK,WAAW;;;;;;kDAChE,8OAAC;wCAAE,WAAU;;4CAAyB,KAAK,GAAG;4CAAC;4CAAI,aAAa,OAAO,KAAK,UAAU;;;;;;;oCACrF,KAAK,OAAO,kBAAI,8OAAC;wCAAE,WAAU;;4CAAwC;4CAAO,KAAK,OAAO;;;;;;;;;;;;;0CAE7F,8OAAC;gCAAE,WAAU;0CACR,aAAa,OAAO,KAAK,UAAU,IAAI,KAAK,GAAG;;;;;;;uBAhB9C,KAAK,EAAE;;;;;;;;;;0BAsBzB,8OAAC,kJAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAM,aAAa;;;;;;;;;;;;kCAExB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAK;;;;;;;;;;;;kCAEV,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAkB,aAAa;;;;;;;;;;;;;;;;;;;;;;;;AAKnE"}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/components/pelanggan/pembayaran/PaymentMethodSelection.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Banknote, CreditCard, Loader2 } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { PaymentMethod } from '@/types';\r\n\r\ninterface PaymentMethodSelectionProps {\r\n    paymentMethods: PaymentMethod[];\r\n    selectedPayment: number | null;\r\n    onSelect: (method: PaymentMethod) => void;\r\n    onPay: () => void;\r\n    isProcessing: boolean;\r\n}\r\n\r\nexport default function PaymentMethodSelection({ \r\n    paymentMethods, \r\n    selectedPayment, \r\n    onSelect, \r\n    onPay, \r\n    isProcessing \r\n}: PaymentMethodSelectionProps) {\r\n    return (\r\n        <div className=\"bg-white rounded-[2rem] p-8 border border-gray-200 shadow-lg h-fit\">\r\n            <h3 className=\"font-bold text-xl mb-6 flex items-center gap-2\">\r\n                <CreditCard className=\"w-5 h-5 text-[#D93F21]\" /> Metode Pembayaran\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8\">\r\n                {paymentMethods.map((method) => (\r\n                    <div \r\n                        key={method.id}\r\n                        onClick={() => onSelect(method)}\r\n                        className={`\r\n                            cursor-pointer rounded-2xl border-2 p-5 flex flex-col items-center justify-center gap-3 transition-all duration-200 h-32 hover:shadow-md\r\n                            ${selectedPayment === method.id \r\n                                ? 'border-[#D93F21] bg-orange-50/50 text-[#D93F21] shadow-md ring-2 ring-orange-100' \r\n                                : 'border-gray-100 hover:border-gray-300 text-gray-600 hover:bg-gray-50'\r\n                            }\r\n                        `}\r\n                    >\r\n                        {method.nama_metode.toLowerCase().includes('cash') || method.nama_metode.toLowerCase().includes('tunai') ? (\r\n                            <Banknote className=\"w-8 h-8\" />\r\n                        ) : (\r\n                            <CreditCard className=\"w-8 h-8\" />\r\n                        )}\r\n                        <span className=\"font-bold text-center text-sm\">{method.nama_metode}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <Button \r\n                className=\"w-full bg-[#D93F21] hover:bg-[#b9351b] text-white font-bold py-8 rounded-2xl text-xl shadow-xl shadow-orange-200 transition-transform active:scale-95\"\r\n                onClick={onPay}\r\n                disabled={isProcessing}\r\n            >\r\n                {isProcessing ? <Loader2 className=\"animate-spin mr-2 h-6 w-6\" /> : \"Buat Pesanan\"}\r\n            </Button>\r\n            \r\n            <p className=\"text-center text-xs text-gray-400 mt-4 px-4 leading-relaxed\">\r\n                Pastikan pesanan Anda sudah benar. Klik tombol di atas untuk memproses pesanan.\r\n            </p>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAHA;;;;AAce,SAAS,uBAAuB,EAC3C,cAAc,EACd,eAAe,EACf,QAAQ,EACR,KAAK,EACL,YAAY,EACc;IAC1B,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;;kCACV,8OAAC,gOAAU;wBAAC,WAAU;;;;;;oBAA2B;;;;;;;0BAGrD,8OAAC;gBAAI,WAAU;0BACV,eAAe,GAAG,CAAC,CAAC,uBACjB,8OAAC;wBAEG,SAAS,IAAM,SAAS;wBACxB,WAAW,CAAC;;4BAER,EAAE,oBAAoB,OAAO,EAAE,GACzB,qFACA,uEACL;wBACL,CAAC;;4BAEA,OAAO,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,OAAO,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,yBAC5F,8OAAC,sNAAQ;gCAAC,WAAU;;;;;qDAEpB,8OAAC,gOAAU;gCAAC,WAAU;;;;;;0CAE1B,8OAAC;gCAAK,WAAU;0CAAiC,OAAO,WAAW;;;;;;;uBAf9D,OAAO,EAAE;;;;;;;;;;0BAoB1B,8OAAC,4IAAM;gBACH,WAAU;gBACV,SAAS;gBACT,UAAU;0BAET,6BAAe,8OAAC,4NAAO;oBAAC,WAAU;;;;;2BAAiC;;;;;;0BAGxE,8OAAC;gBAAE,WAAU;0BAA8D;;;;;;;;;;;;AAKvF"}},
    {"offset": {"line": 565, "column": 0}, "map": {"version":3,"sources":["file:///E:/03-NGODING/20-MainDiHatta.id/FrontEnd/maindihatta-frontend/src/app/pelanggan/pembayaran/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter } from 'next/navigation';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\n\r\n// 1. Import Custom Hook\r\nimport { usePembayaranPage } from '@/hooks/pelanggan/usePembayaranPage';\r\n\r\n// 2. Import Komponen UI Pecahan\r\nimport CustomerInfoCard from '@/components/pelanggan/pembayaran/CustomerInfoCard';\r\nimport OrderSummaryCard from '@/components/pelanggan/pembayaran/OrderSummaryCard';\r\nimport PaymentMethodSelection from '@/components/pelanggan/pembayaran/PaymentMethodSelection';\r\n\r\nexport default function PembayaranPage() {\r\n    const router = useRouter();\r\n\r\n    // 3. Panggil Logika dari Custom Hook\r\n    const {\r\n        user,\r\n        cart,\r\n        totalPrice,\r\n        totalItems,\r\n        tableNumber,\r\n        paymentMethods,\r\n        selectedPayment,\r\n        isProcessing,\r\n        handleSelectPayment,\r\n        handlePayNow,\r\n        formatRupiah\r\n    } = usePembayaranPage();\r\n\r\n    // Cegah render konten jika cart kosong (karena hook akan redirect)\r\n    if (cart.length === 0) return null; \r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-white font-sans text-gray-900 py-10 px-4 md:px-8\">\r\n            \r\n            {/* Header Navigasi */}\r\n            <div className=\"max-w-6xl mx-auto mb-8 flex items-center\">\r\n                <Button \r\n                    variant=\"ghost\" \r\n                    onClick={() => router.back()} \r\n                    className=\"mr-4 text-gray-500 hover:bg-gray-100 rounded-full\"\r\n                >\r\n                    <ArrowLeft className=\"w-6 h-6\" />\r\n                </Button>\r\n                <h1 className=\"text-3xl font-extrabold text-[#D93F21] mx-auto pr-10\">\r\n                    Selesaikan Pesanan\r\n                </h1>\r\n            </div>\r\n\r\n            {/* Layout Utama Dua Kolom */}\r\n            <div className=\"max-w-6xl mx-auto bg-white rounded-[2.5rem] shadow-xl overflow-hidden border border-gray-100\">\r\n                <div className=\"flex flex-col lg:flex-row min-h-[600px]\">\r\n                    \r\n                    {/* KOLOM KIRI: Ringkasan Pesanan (Background Abu-abu Muda) */}\r\n                    <div className=\"w-full lg:w-1/2 p-8 md:p-12 flex flex-col justify-center space-y-8 bg-gray-50/30 border-b lg:border-b-0 lg:border-r border-gray-100\">\r\n                        \r\n                        {/* 1. Komponen Info Pelanggan */}\r\n                        <CustomerInfoCard \r\n                            userName={user?.name || 'Guest'} \r\n                            tableNumber={tableNumber} \r\n                        />\r\n\r\n                        {/* 2. Komponen Rincian Menu & Total */}\r\n                        <OrderSummaryCard \r\n                            // FIX: Konversi harga_jual ke number agar sesuai tipe props\r\n                            cart={cart.map(item => ({...item, harga_jual: Number(item.harga_jual)}))}\r\n                            totalItems={totalItems}\r\n                            totalPrice={totalPrice}\r\n                            formatRupiah={formatRupiah}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* KOLOM KANAN: Metode Pembayaran (Background Putih) */}\r\n                    <div className=\"w-full lg:w-1/2 p-8 md:p-12 flex flex-col justify-center bg-white relative\">\r\n                        {/* Hiasan background dekoratif */}\r\n                        <div className=\"absolute top-0 right-0 w-32 h-32 bg-orange-50 rounded-bl-full opacity-50 pointer-events-none\"></div>\r\n\r\n                        {/* 3. Komponen Pilihan Metode Bayar */}\r\n                        <PaymentMethodSelection \r\n                            paymentMethods={paymentMethods}\r\n                            selectedPayment={selectedPayment}\r\n                            onSelect={handleSelectPayment}\r\n                            onPay={handlePayNow}\r\n                            isProcessing={isProcessing}\r\n                        />\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA,wBAAwB;AACxB;AAEA,gCAAgC;AAChC;AACA;AACA;AAZA;;;;;;;;;AAce,SAAS;IACpB,MAAM,SAAS,IAAA,+IAAS;IAExB,qCAAqC;IACrC,MAAM,EACF,IAAI,EACJ,IAAI,EACJ,UAAU,EACV,UAAU,EACV,WAAW,EACX,cAAc,EACd,eAAe,EACf,YAAY,EACZ,mBAAmB,EACnB,YAAY,EACZ,YAAY,EACf,GAAG,IAAA,mKAAiB;IAErB,mEAAmE;IACnE,IAAI,KAAK,MAAM,KAAK,GAAG,OAAO;IAE9B,qBACI,8OAAC;QAAI,WAAU;;0BAGX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,4IAAM;wBACH,SAAQ;wBACR,SAAS,IAAM,OAAO,IAAI;wBAC1B,WAAU;kCAEV,cAAA,8OAAC,6NAAS;4BAAC,WAAU;;;;;;;;;;;kCAEzB,8OAAC;wBAAG,WAAU;kCAAuD;;;;;;;;;;;;0BAMzE,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCAGX,8OAAC;4BAAI,WAAU;;8CAGX,8OAAC,4KAAgB;oCACb,UAAU,MAAM,QAAQ;oCACxB,aAAa;;;;;;8CAIjB,8OAAC,4KAAgB;oCACb,4DAA4D;oCAC5D,MAAM,KAAK,GAAG,CAAC,CAAA,OAAQ,CAAC;4CAAC,GAAG,IAAI;4CAAE,YAAY,OAAO,KAAK,UAAU;wCAAC,CAAC;oCACtE,YAAY;oCACZ,YAAY;oCACZ,cAAc;;;;;;;;;;;;sCAKtB,8OAAC;4BAAI,WAAU;;8CAEX,8OAAC;oCAAI,WAAU;;;;;;8CAGf,8OAAC,kLAAsB;oCACnB,gBAAgB;oCAChB,iBAAiB;oCACjB,UAAU;oCACV,OAAO;oCACP,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1C"}}]
}