module.exports=[78130,a=>{"use strict";var b=a.i(87924),c=a.i(15618),d=a.i(99570),e=a.i(72131),f=a.i(28337),g=a.i(23292),h=a.i(17643),i=a.i(87532),j=a.i(33508),k=a.i(66718),l=a.i(80701);function m({searchQuery:a,setSearchQuery:c,filterRole:e,setFilterRole:f,roles:g}){return(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 p-4 border border-gray-200 rounded-lg shadow-sm bg-white",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(i.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500"}),(0,b.jsx)(k.Input,{placeholder:"Cari nama atau email...",className:"pl-9",value:a,onChange:a=>c(a.target.value)})]}),(0,b.jsx)("div",{className:"w-full md:w-[200px]",children:(0,b.jsxs)(l.Select,{value:e,onValueChange:f,children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Filter Role"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"Semua Role"}),g.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.name_role},a.id))]})]})}),(a||"all"!==e)&&(0,b.jsxs)(d.Button,{variant:"ghost",onClick:()=>{c(""),f("all")},className:"text-gray-500",children:[(0,b.jsx)(j.X,{className:"h-4 w-4 mr-2"})," Reset"]})]})}var n=a.i(99464),o=a.i(81560),p=a.i(96221),q=a.i(86304),r=a.i(6015);function s({loading:a,users:c,onEdit:e,onDelete:f}){return(0,b.jsx)("div",{className:"rounded-md border bg-white shadow-sm",children:(0,b.jsxs)(r.Table,{children:[(0,b.jsx)(r.TableHeader,{children:(0,b.jsxs)(r.TableRow,{className:"bg-gray-50",children:[(0,b.jsx)(r.TableHead,{className:"w-[50px] text-center",children:"No"}),(0,b.jsx)(r.TableHead,{children:"Nama Lengkap"}),(0,b.jsx)(r.TableHead,{children:"Email & Kontak"}),(0,b.jsx)(r.TableHead,{children:"Role"}),(0,b.jsx)(r.TableHead,{className:"text-right",children:"Aksi"})]})}),(0,b.jsx)(r.TableBody,{children:a?(0,b.jsx)(r.TableRow,{children:(0,b.jsxs)(r.TableCell,{colSpan:5,className:"h-24 text-center",children:[(0,b.jsx)(p.Loader2,{className:"h-5 w-5 animate-spin inline mr-2"})," Memuat..."]})}):0===c.length?(0,b.jsx)(r.TableRow,{children:(0,b.jsx)(r.TableCell,{colSpan:5,className:"h-32 text-center text-gray-500",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,b.jsx)(i.Search,{className:"h-8 w-8 text-gray-300 mb-2"}),(0,b.jsx)("p",{children:"User tidak ditemukan."})]})})}):c.map((a,c)=>(0,b.jsxs)(r.TableRow,{className:"hover:bg-gray-50",children:[(0,b.jsx)(r.TableCell,{className:"text-center text-gray-500",children:c+1}),(0,b.jsxs)(r.TableCell,{children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsx)("div",{className:"text-xs text-gray-500 truncate max-w-[200px]",children:a.alamat||"-"})]}),(0,b.jsxs)(r.TableCell,{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:a.email}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.nomor_telepon||"-"})]}),(0,b.jsx)(r.TableCell,{children:(a=>{switch(a){case"Admin":return(0,b.jsx)(q.Badge,{className:"bg-red-100 text-red-800 border-red-200 hover:bg-red-100 shadow-none",children:"Admin"});case"Karyawan":return(0,b.jsx)(q.Badge,{className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-100 shadow-none",children:"Karyawan"});case"Pelanggan":return(0,b.jsx)(q.Badge,{className:"bg-blue-100 text-blue-800 border-blue-200 hover:bg-blue-100 shadow-none",children:"Pelanggan"});default:return(0,b.jsx)(q.Badge,{variant:"outline",children:a})}})(a.role?.name_role)}),(0,b.jsxs)(r.TableCell,{className:"text-right space-x-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>e(a),className:"hover:bg-blue-50 hover:text-blue-600",children:(0,b.jsx)(n.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>f(a.id),className:"hover:bg-red-50 hover:text-red-600",children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})]},a.id))})]})})}var t=a.i(43108),u=a.i(70430),v=a.i(14574);function w({isOpen:a,onOpenChange:c,onSubmit:f,initialData:g,roles:h}){let[i,j]=(0,e.useState)(!1),[m,n]=(0,e.useState)({name:"",email:"",nomor_telepon:"",alamat:"",role_id:"",password:"",password_confirmation:""});(0,e.useEffect)(()=>{a&&g?n({name:g.name,email:g.email,nomor_telepon:g.nomor_telepon||"",alamat:g.alamat||"",role_id:g.role_id.toString(),password:"",password_confirmation:""}):a&&!g&&n({name:"",email:"",nomor_telepon:"",alamat:"",role_id:"",password:"",password_confirmation:""})},[a,g]);let o=async a=>{a.preventDefault(),j(!0),await f(m,!!g),j(!1)};return(0,b.jsx)(v.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(v.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{children:g?"Edit User":"Tambah User Baru"}),(0,b.jsx)(v.DialogDescription,{children:"Isi detail pengguna untuk memberikan akses sistem."})]}),(0,b.jsxs)("form",{onSubmit:o,className:"space-y-4 mt-2",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,b.jsxs)(u.Label,{children:["Nama Lengkap ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(k.Input,{value:m.name,onChange:a=>n({...m,name:a.target.value}),required:!0,placeholder:"Nama User"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(u.Label,{children:["Email ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(k.Input,{type:"email",value:m.email,onChange:a=>n({...m,email:a.target.value}),required:!0,placeholder:"email@domain.com"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(u.Label,{children:["Role ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)(l.Select,{value:m.role_id,onValueChange:a=>n({...m,role_id:a}),children:[(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"Pilih Role"})}),(0,b.jsx)(l.SelectContent,{children:h.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.name_role},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{children:"Nomor Telepon"}),(0,b.jsx)(k.Input,{value:m.nomor_telepon,onChange:a=>n({...m,nomor_telepon:a.target.value}),placeholder:"08..."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{children:"Alamat"}),(0,b.jsx)(k.Input,{value:m.alamat,onChange:a=>n({...m,alamat:a.target.value}),placeholder:"Alamat lengkap"})]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-100 pt-4 mt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(t.Lock,{className:"w-4 h-4 text-gray-500"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Pengaturan Keamanan"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(u.Label,{children:["Password ",g&&(0,b.jsx)("span",{className:"text-xs font-normal text-gray-500",children:"(Kosongkan jika tidak ubah)"})]}),(0,b.jsx)(k.Input,{type:"password",value:m.password,onChange:a=>n({...m,password:a.target.value}),required:!g,placeholder:g?"******":"Wajib diisi"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(u.Label,{children:"Konfirmasi Password"}),(0,b.jsx)(k.Input,{type:"password",value:m.password_confirmation,onChange:a=>n({...m,password_confirmation:a.target.value}),required:!g||""!==m.password,placeholder:g?"******":"Wajib diisi"})]})]})]}),(0,b.jsxs)(v.DialogFooter,{className:"pt-4",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Batal"}),(0,b.jsx)(d.Button,{type:"submit",disabled:i,className:"bg-[#D93F21] hover:bg-[#b9351b]",children:i?(0,b.jsx)(p.Loader2,{className:"h-4 w-4 animate-spin"}):"Simpan"})]})]})]})})}function x(){let{users:a,roles:i,loading:j,searchQuery:k,setSearchQuery:l,filterRole:n,setFilterRole:o,isDialogOpen:p,setIsDialogOpen:q,editData:r,handleCreate:t,handleEdit:u,handleDelete:v,handleSubmit:x}=function(){let[a,b]=(0,e.useState)([]),[c,d]=(0,e.useState)([]),[i,j]=(0,e.useState)(!0),[k,l]=(0,e.useState)(""),[m,n]=(0,e.useState)("all"),[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(null),s=(0,e.useCallback)(async()=>{j(!0);try{let[a,c]=await Promise.all([f.default.get("/api/users"),f.default.get("/api/roles")]),e=a=>{let b=a.data?.data||a.data;return Array.isArray(b)?b:[]};b(e(a)),d(e(c))}catch(a){console.error("Error fetching data:",a),g.toast.error("Gagal memuat data user."),b([]),d([])}finally{j(!1)}},[]);(0,e.useEffect)(()=>{s()},[s]);let t=(Array.isArray(a)?a:[]).filter(a=>{if(!a)return!1;let b=a.name?.toLowerCase()||"",c=a.email?.toLowerCase()||"",d=k.toLowerCase(),e=b.includes(d)||c.includes(d),f="all"===m||a.role_id?.toString()===m;return e&&f}),u=async(a,b)=>{try{if(b&&q){let b={...a};b.password||delete b.password,b.password_confirmation||delete b.password_confirmation,await f.default.put(`/api/users/${q.id}`,b),g.toast.success("Data user diperbarui!")}else await f.default.post("/api/users",a),g.toast.success("User baru ditambahkan!");p(!1),s()}catch(b){let a=b.response?.data?.message||"Gagal menyimpan data.";g.toast.error(a)}};return{users:t,roles:c,loading:i,searchQuery:k,filterRole:m,isDialogOpen:o,editData:q,setSearchQuery:l,setFilterRole:n,setIsDialogOpen:p,handleCreate:()=>{r(null),p(!0)},handleEdit:a=>{r(a),p(!0)},handleDelete:async a=>{if((await h.sweetAlert.confirmDelete("Hapus User?","Apakah Anda yakin ingin menghapus user ini?")).isConfirmed)try{await f.default.delete(`/api/users/${a}`),g.toast.success("User berhasil dihapus."),s()}catch(a){g.toast.error(a.response?.data?.message||"Gagal menghapus.")}},handleSubmit:u}}();return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen User"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Kelola akun Admin, Karyawan, dan Pelanggan."})]}),(0,b.jsxs)(d.Button,{className:"bg-[#D93F21] hover:bg-[#b9351b] shadow-sm",onClick:t,children:[(0,b.jsx)(c.Plus,{className:"w-4 h-4 mr-2"})," Tambah User"]})]}),(0,b.jsx)(m,{searchQuery:k,setSearchQuery:l,filterRole:n,setFilterRole:o,roles:i}),(0,b.jsx)(s,{loading:j,users:a,onEdit:u,onDelete:v}),(0,b.jsx)(w,{isOpen:p,onOpenChange:q,onSubmit:x,initialData:r,roles:i})]})}a.s(["default",()=>x],78130)}];

//# sourceMappingURL=src_app_admin_users_page_tsx_aef2c918._.js.map