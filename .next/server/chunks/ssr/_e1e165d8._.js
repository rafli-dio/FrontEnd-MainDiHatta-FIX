module.exports=[41710,a=>{"use strict";let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],41710)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},25118,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(32636),e=a.i(72131),f=a.i(28337),g=a.i(23292),h=a.i(210),i=a.i(16201),j=a.i(81560),k=a.i(99570);function l({onBack:a,onMarkAllRead:c,onDeleteAll:d,hasNotifications:e}){return(0,b.jsx)("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-10 px-4 py-4 shadow-sm",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(k.Button,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-600 hover:bg-gray-100 rounded-full",children:(0,b.jsx)(h.ArrowLeft,{className:"w-6 h-6"})}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Notifikasi"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 self-end md:self-auto",children:[(0,b.jsxs)(k.Button,{variant:"ghost",size:"sm",onClick:c,disabled:!e,className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 text-xs md:text-sm",children:[(0,b.jsx)(i.CheckCircle,{className:"w-4 h-4 mr-2"}),"Tandai Baca"]}),(0,b.jsxs)(k.Button,{variant:"ghost",size:"sm",onClick:d,disabled:!e,className:"text-red-500 hover:text-red-700 hover:bg-red-50 text-xs md:text-sm",children:[(0,b.jsx)(j.Trash2,{className:"w-4 h-4 mr-2"}),"Hapus Semua"]})]})]})})}var m=a.i(23312),n=a.i(41710);function o({notification:a,onRead:c,onDelete:d}){return(0,b.jsx)("div",{onClick:()=>c(a.id,a.is_read),className:`
                group relative p-4 rounded-xl border transition-all cursor-pointer hover:shadow-md
                ${a.is_read?"bg-white border-gray-200":"bg-orange-50 border-orange-100 shadow-sm"}
            `,children:(0,b.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,b.jsx)("div",{className:`
                    mt-1 min-w-[40px] h-10 rounded-full flex items-center justify-center
                    ${a.is_read?"bg-gray-100 text-gray-500":"bg-[#D93F21]/10 text-[#D93F21]"}
                `,children:(0,b.jsx)(m.Bell,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{className:"flex-1 pr-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,b.jsx)("h4",{className:`text-base ${a.is_read?"font-semibold text-gray-700":"font-bold text-gray-900"}`,children:a.title}),!a.is_read&&(0,b.jsx)("span",{className:"w-2.5 h-2.5 bg-[#D93F21] rounded-full mt-1.5 animate-pulse"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed mb-2",children:a.message}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,b.jsx)(n.Clock,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:a.created_at})]})]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),d(a.id)},className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Hapus notifikasi ini",children:(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})})]})})}function p(){return(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-24 bg-gray-200 rounded-xl animate-pulse"},a))})}function q(){return(0,b.jsxs)("div",{className:"text-center py-20",children:[(0,b.jsx)("div",{className:"bg-gray-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(m.Bell,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Belum ada notifikasi"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Semua aktivitas pesanan Anda akan muncul di sini."})]})}function r(){let{user:a}=(0,d.useAuth)(),h=(0,c.useRouter)(),{notifications:i,loading:j,markAsRead:k,markAllRead:m,deleteOne:n,deleteAll:r}=(a=>{let[b,c]=(0,e.useState)([]),[d,h]=(0,e.useState)(!0),i=(0,e.useCallback)(async()=>{if(!a){c([]),h(!1);return}try{h(!0);let b=await f.default.get("/notifications",{params:{user_id:a}}),d=b.data?.data||b.data;Array.isArray(d)?c(d):d?.notifications&&Array.isArray(d.notifications)?c(d.notifications):(console.warn("Format notifikasi tidak valid:",d),c([]))}catch(a){console.error("Gagal ambil notif",a),c([])}finally{h(!1)}},[a]);(0,e.useEffect)(()=>{i()},[i]);let j=async()=>{if(!confirm("Apakah Anda yakin ingin menghapus SEMUA notifikasi?"))return;let d=[...b];c([]);try{await f.default.delete("/notifications",{params:{user_id:a}}),g.toast.success("Semua notifikasi dihapus")}catch(a){console.error("Gagal hapus semua",a),g.toast.error("Gagal menghapus notifikasi"),c(d)}};return{notifications:b,loading:d,markAsRead:async(b,d)=>{if(!d){c(a=>(a||[]).map(a=>a.id===b?{...a,is_read:!0}:a));try{await f.default.post(`/notifications/${b}/read`,{},{params:{user_id:a}})}catch(a){console.error("Gagal update status read",a),i()}}},markAllRead:async()=>{c(a=>(a||[]).map(a=>({...a,is_read:!0})));try{await f.default.post("/notifications/read-all",{},{params:{user_id:a}}),g.toast.success("Semua notifikasi ditandai sudah dibaca")}catch(a){console.error("Gagal mark all",a),i()}},deleteOne:async b=>{c(a=>(a||[]).filter(a=>a.id!==b));try{await f.default.delete(`/notifications/${b}`,{params:{user_id:a}})}catch(a){console.error("Gagal hapus notifikasi",a),g.toast.error("Gagal menghapus notifikasi"),i()}},deleteAll:j,refetch:i}})(a?.id);return a?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-10",children:[(0,b.jsx)(l,{onBack:()=>h.back(),onMarkAllRead:m,onDeleteAll:r,hasNotifications:i.length>0}),(0,b.jsx)("div",{className:"max-w-2xl mx-auto px-4 mt-6",children:j?(0,b.jsx)(p,{}):0===i.length?(0,b.jsx)(q,{}):(0,b.jsx)("div",{className:"space-y-3",children:i.map(a=>(0,b.jsx)(o,{notification:a,onRead:k,onDelete:n},a.id))})})]}):null}a.s(["default",()=>r],25118)}];

//# sourceMappingURL=_e1e165d8._.js.map