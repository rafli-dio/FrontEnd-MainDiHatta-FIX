module.exports=[24987,a=>{"use strict";let b=(0,a.i(70106).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},97063,a=>{"use strict";let b=(0,a.i(70106).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);a.s(["Info",()=>b],97063)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},77156,a=>{"use strict";let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},6015,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},69012,a=>{"use strict";let b=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);a.s(["Filter",()=>b],69012)},9067,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(15618),e=a.i(28790),f=a.i(67329),g=a.i(41675),h=a.i(99570),i=a.i(75083),j=a.i(72131),k=a.i(28337),l=a.i(23292),m=a.i(56711),n=a.i(87532),o=a.i(69012),p=a.i(66718),q=a.i(91119),r=a.i(80701);function s({searchQuery:a,setSearchQuery:c,statusFilter:d,setStatusFilter:e}){return(0,b.jsx)(q.Card,{className:"p-4 border shadow-sm",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-500"}),(0,b.jsx)(p.Input,{placeholder:"Cari Kode Booking / Nama Pelanggan...",className:"pl-9",value:a,onChange:a=>c(a.target.value)})]}),(0,b.jsx)("div",{className:"w-full md:w-[200px]",children:(0,b.jsxs)(r.Select,{value:d,onValueChange:e,children:[(0,b.jsxs)(r.SelectTrigger,{children:[(0,b.jsx)(o.Filter,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,b.jsx)(r.SelectValue,{placeholder:"Filter Status"})]}),(0,b.jsxs)(r.SelectContent,{children:[(0,b.jsx)(r.SelectItem,{value:"all",children:"Semua Status"}),(0,b.jsx)(r.SelectItem,{value:"1",children:"Menunggu Bayar"}),(0,b.jsx)(r.SelectItem,{value:"2",children:"Perlu Konfirmasi"}),(0,b.jsx)(r.SelectItem,{value:"3",children:"Terkonfirmasi"}),(0,b.jsx)(r.SelectItem,{value:"5",children:"Selesai"}),(0,b.jsx)(r.SelectItem,{value:"4",children:"Dibatalkan"})]})]})})]})})}var t=a.i(93901),u=a.i(24987),v=a.i(20146),w=a.i(86304);function x({selectedDate:a,setSelectedDate:c,bookedDays:d,bookingsOnSelectedDate:e,onViewDetail:f}){return(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[(0,b.jsx)(q.Card,{className:"flex-none w-full lg:w-auto",children:(0,b.jsx)(q.CardContent,{className:"p-4 flex justify-center",children:(0,b.jsx)(v.Calendar,{mode:"single",selected:a,onSelect:c,className:"rounded-md border shadow-sm",modifiers:{booked:d},modifiersStyles:{booked:{fontWeight:"bold",color:"#D93F21",textDecoration:"underline"}}})})}),(0,b.jsxs)(q.Card,{className:"flex-1 w-full min-h-[350px]",children:[(0,b.jsx)(q.CardHeader,{className:"border-b pb-3",children:(0,b.jsxs)(q.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,b.jsx)(g.Calendar,{className:"w-5 h-5 text-[#D93F21]"}),"Jadwal: ",a?(0,m.format)(a,"dd MMMM yyyy",{locale:t.id}):"-"]})}),(0,b.jsx)(q.CardContent,{className:"pt-4",children:0===e.length?(0,b.jsx)("div",{className:"text-center py-10 text-gray-500",children:(0,b.jsx)("p",{children:"Tidak ada jadwal booking pada tanggal ini."})}):(0,b.jsx)("div",{className:"space-y-3",children:e.sort((a,b)=>a.jam_mulai.localeCompare(b.jam_mulai)).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-100 hover:border-[#D93F21]/30 hover:shadow-sm transition-all cursor-pointer bg-white",onClick:()=>f(a),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"bg-orange-50 text-[#D93F21] p-2 rounded-md font-mono text-sm font-bold text-center w-24",children:[a.jam_mulai.substring(0,5)," ",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-xs font-normal text-gray-500",children:"s/d"})," ",(0,b.jsx)("br",{}),a.jam_selesai.substring(0,5)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-gray-900",children:a.nama_pengirim||a.user?.name||"Tamu"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[(0,b.jsx)(u.MapPin,{className:"w-3 h-3"})," ",a.lapangan?.nama_lapangan,a.acara&&(0,b.jsxs)("span",{className:"bg-gray-100 px-1.5 rounded",children:["Kegiatan: ",a.acara]})]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:(a=>{switch(a){case 1:return(0,b.jsx)(w.Badge,{variant:"outline",className:"text-yellow-700 bg-yellow-50 border-yellow-200",children:"Pending"});case 2:return(0,b.jsx)(w.Badge,{className:"bg-blue-500 hover:bg-blue-600",children:"Verifikasi"});case 3:return(0,b.jsx)(w.Badge,{className:"bg-green-600 hover:bg-green-700",children:"OK"});case 5:return(0,b.jsx)(w.Badge,{variant:"outline",className:"bg-gray-100",children:"Selesai"});default:return(0,b.jsx)(w.Badge,{variant:"secondary",children:"Unknown"})}})(a.status_booking_id)})]},a.id))})})]})]})}var y=a.i(92052),z=a.i(25579);function A(){let{loading:a,viewMode:n,searchQuery:o,statusFilter:p,selectedDate:q,selectedBooking:r,isDialogOpen:t,isProcessing:u,filteredBookingsTable:v,bookingsOnSelectedDate:w,bookedDays:A,setViewMode:B,setSearchQuery:C,setStatusFilter:D,setSelectedDate:E,setIsDialogOpen:F,fetchBookings:G,handleViewDetail:H,handleApprove:I,handleReject:J}=function(){let[a,b]=(0,j.useState)([]),[c,d]=(0,j.useState)(!0),[e,f]=(0,j.useState)("table"),[g,h]=(0,j.useState)(""),[i,n]=(0,j.useState)("all"),[o,p]=(0,j.useState)(new Date),[q,r]=(0,j.useState)(null),[s,t]=(0,j.useState)(!1),[u,v]=(0,j.useState)(!1),w=async()=>{d(!0);try{let a=await k.default.get("/api/bookings"),c=a.data?.data||a.data;Array.isArray(c)?b(c):(console.warn("Format data booking tidak valid:",c),b([]))}catch(a){console.error(a),l.toast.error("Gagal memuat data booking."),b([])}finally{d(!1)}};(0,j.useEffect)(()=>{w();let a=setInterval(w,3e4);return()=>clearInterval(a)},[]);let x=Array.isArray(a)?a:[],y=x.filter(a=>{if(!a)return!1;let b=g.toLowerCase(),c=a.kode_booking?.toLowerCase().includes(b)||a.user?.name?.toLowerCase().includes(b)||a.nama_pengirim&&a.nama_pengirim.toLowerCase().includes(b)||!1,d="all"===i||a.status_booking_id?.toString()===i;return c&&d}),z=x.filter(a=>o&&a?.tanggal_booking===(0,m.format)(o,"yyyy-MM-dd")&&a?.status_booking_id!==4),A=x.filter(a=>a?.status_booking_id!==4&&a?.tanggal_booking).map(a=>new Date(a.tanggal_booking)),B=async a=>{if(confirm("Konfirmasi booking ini? Pastikan pembayaran valid.")){v(!0);try{await k.default.patch(`/api/bookings/${a}/status`,{status_booking_id:3}),l.toast.success("Booking berhasil dikonfirmasi!"),t(!1),w()}catch(a){l.toast.error(a.response?.data?.message||"Gagal konfirmasi.")}finally{v(!1)}}},C=async a=>{if(confirm("Tolak booking ini? Data akan ditandai batal.")){v(!0);try{await k.default.patch(`/api/bookings/${a}/cancel`),l.toast.success("Booking ditolak/dibatalkan."),t(!1),w()}catch(a){l.toast.error(a.response?.data?.message||"Gagal menolak.")}finally{v(!1)}}};return{bookings:a,loading:c,viewMode:e,searchQuery:g,statusFilter:i,selectedDate:o,selectedBooking:q,isDialogOpen:s,isProcessing:u,filteredBookingsTable:y,bookingsOnSelectedDate:z,bookedDays:A,setViewMode:f,setSearchQuery:h,setStatusFilter:n,setSelectedDate:p,setIsDialogOpen:t,fetchBookings:w,handleViewDetail:a=>{r(a),t(!0)},handleApprove:B,handleReject:C}}();return(0,b.jsxs)("div",{className:"space-y-6 pb-20 p-6 md:p-8 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manajemen Booking"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Pantau jadwal dan konfirmasi pembayaran pelanggan."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:G,title:"Refresh Data",disabled:a,children:(0,b.jsx)(e.RefreshCcw,{className:`w-4 h-4 ${a?"animate-spin":""}`})}),(0,b.jsx)(c.default,{href:"/karyawan/booking/create",children:(0,b.jsxs)(h.Button,{className:"bg-[#D93F21] hover:bg-[#b9351b]",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4 mr-2"})," Input Manual"]})})]})]}),(0,b.jsxs)(i.Tabs,{defaultValue:"table",value:n,onValueChange:B,className:"w-full",children:[(0,b.jsxs)(i.TabsList,{className:"grid w-full max-w-[400px] grid-cols-2 mb-6",children:[(0,b.jsxs)(i.TabsTrigger,{value:"table",children:[(0,b.jsx)(f.List,{className:"w-4 h-4 mr-2"})," Daftar List"]}),(0,b.jsxs)(i.TabsTrigger,{value:"calendar",children:[(0,b.jsx)(g.Calendar,{className:"w-4 h-4 mr-2"})," Kalender Jadwal"]})]}),(0,b.jsxs)(i.TabsContent,{value:"table",className:"space-y-6 mt-0",children:[(0,b.jsx)(s,{searchQuery:o,setSearchQuery:C,statusFilter:p,setStatusFilter:D}),(0,b.jsx)(y.default,{loading:a,bookings:v,onView:H})]}),(0,b.jsx)(i.TabsContent,{value:"calendar",className:"mt-0",children:(0,b.jsx)(x,{selectedDate:q,setSelectedDate:E,bookedDays:A,bookingsOnSelectedDate:w,onViewDetail:H})})]}),(0,b.jsx)(z.default,{isOpen:t,onOpenChange:F,booking:r,onApprove:I,onReject:J,isProcessing:u,onRefresh:G})]})}a.s(["default",()=>A],9067)}];

//# sourceMappingURL=_101539cc._.js.map